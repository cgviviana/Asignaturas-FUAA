<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Juego Nivel 1 ‚Äì Fila Central</title>
  <style>
    :root{
      --bg:#0f1226;
      --card:#171a34;
      --accent:#4ade80; /* verde */
      --accent-2:#60a5fa; /* azul */
      --accent-3:#f472b6; /* rosa */
      --text:#f8fafc;
      --muted:#cbd5e1;
      --danger:#fb7185;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
      color:var(--text); background:radial-gradient(1200px 800px at 10% 10%, #1a1f46 0%, #0f1226 60%), var(--bg);
      display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .app{
      width:min(980px,100%); display:grid; gap:16px;
      grid-template-columns: 1fr 320px;
    }
    @media (max-width:900px){
      .app{grid-template-columns:1fr}
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border:1px solid rgba(255,255,255,0.08);
      border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,.35);
      backdrop-filter: blur(8px);
    }
    .header{padding:18px 20px; display:flex; align-items:center; justify-content:space-between}
    .title{font-size:clamp(18px,2.6vw,22px); letter-spacing:.4px; opacity:.9}
    .actions{display:flex; gap:8px; align-items:center}
    button{
      appearance:none; border:none; border-radius:12px; padding:10px 14px; font-weight:600; cursor:pointer;
      color:#0b1021; background:var(--accent); transition: transform .05s ease, filter .15s ease;
    }
    button.secondary{ background:transparent; color:var(--text); border:1px solid rgba(255,255,255,.15)}
    button:active{ transform: translateY(1px) }
    .main{padding:24px; display:grid; grid-template-rows:auto 1fr auto; gap:16px}

    .hud{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px }
    .stat{
      background:var(--card); border-radius:12px; padding:12px; text-align:center;
      border:1px solid rgba(255,255,255,.06)
    }
    .stat h4{margin:0; font-size:12px; color:var(--muted); font-weight:600; letter-spacing:.6px}
    .stat .v{margin-top:6px; font-size:22px; font-weight:800}

    .playzone{
      background:linear-gradient(180deg, rgba(96,165,250,.12), rgba(74,222,128,.12));
      border:1px dashed rgba(255,255,255,.15); border-radius:16px; display:grid; place-items:center; padding:14px; min-height:280px;
    }
    .target{
      font-size:clamp(48px,9vw,96px); font-weight:900; letter-spacing:.04em; 
      padding:16px 28px; border-radius:20px; 
      background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.12), rgba(255,255,255,0));
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.06), 0 10px 30px rgba(0,0,0,.35);
      transform: translateZ(0);
    }
    .hint{margin-top:6px; font-size:14px; color:var(--muted)}

    .keyboard{ display:flex; justify-content:center; gap:8px; flex-wrap:wrap; padding:8px }
    .key{
      width:44px; height:52px; display:grid; place-items:center; font-weight:800;
      border-radius:10px; border:1px solid rgba(255,255,255,.12);
      background:linear-gradient(180deg,#1f2348,#171a34);
      color:var(--text); opacity:.6; transition:.2s ease; user-select:none
    }
    .key.active{ opacity:1; transform:translateY(-4px); outline:2px solid var(--accent); box-shadow:0 10px 20px rgba(74,222,128,.25)}

    .progress{height:12px; background:#111431; border-radius:999px; overflow:hidden; border:1px solid rgba(255,255,255,.08)}
    .bar{height:100%; width:0%; background:linear-gradient(90deg, var(--accent), var(--accent-2), var(--accent-3)); transition:width .25s ease}

    .side{padding:16px; display:grid; gap:12px}
    .side h3{margin:0; font-size:16px; opacity:.9}
    .list{display:grid; gap:8px; max-height:280px; overflow:auto; padding-right:2px}
    .mistake{display:flex; gap:8px; align-items:center; background:rgba(251,113,133,.12); border:1px solid rgba(251,113,133,.35); padding:8px 10px; border-radius:10px}
    .mistake .tag{font-weight:800; font-size:12px; background:rgba(251,113,133,.18); padding:4px 8px; border-radius:999px}

    .footer{display:flex; justify-content:space-between; align-items:center; gap:10px; margin-top:6px}
    .help{font-size:12px; color:var(--muted)}

    .toast{ position:fixed; inset:auto 16px 16px auto; background:#111431; color:var(--text); border:1px solid rgba(255,255,255,.12); padding:10px 14px; border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,.35); opacity:0; transform:translateY(8px); transition:.25s ease }
    .toast.show{ opacity:1; transform:translateY(0) }

    /* tiny confetti */
    .confetti{position:fixed; pointer-events:none; inset:0}
  </style>
</head>
<body>
  <div class="app">

    <section class="card">
      <div class="header">
        <div class="title">üéØ Nivel 1 ‚Äì Fila Central: <b>asdfghjkl√±</b></div>
        <div class="actions">
          <button id="startBtn">Iniciar</button>
          <button id="resetBtn" class="secondary">Reiniciar</button>
        </div>
      </div>
      <div class="main">
        <div class="hud">
          <div class="stat"><h4>Puntaje</h4><div class="v" id="score">0 / 10</div></div>
          <div class="stat"><h4>Precisi√≥n</h4><div class="v" id="accuracy">100%</div></div>
          <div class="stat"><h4>Errores</h4><div class="v" id="errorsCount">0</div></div>
        </div>

        <div class="playzone">
          <div>
            <div class="target" id="target">‚Äî</div>
            <div class="hint" id="hint">Pulsa <b>Iniciar</b> y escribe la tecla que ves gigante. ¬°No mires el teclado! ;)</div>
          </div>
        </div>

        <div class="progress" aria-label="Progreso a 10">
          <div class="bar" id="bar"></div>
        </div>

        <div class="keyboard" aria-label="Fila central visual">
          <!-- fila central espa√±ol: a s d f g h j k l √± -->
          <div class="key" data-k="a">A</div>
          <div class="key" data-k="s">S</div>
          <div class="key" data-k="d">D</div>
          <div class="key" data-k="f">F</div>
          <div class="key" data-k="g">G</div>
          <div class="key" data-k="h">H</div>
          <div class="key" data-k="j">J</div>
          <div class="key" data-k="k">K</div>
          <div class="key" data-k="l">L</div>
          <div class="key" data-k="√±">√ë</div>
        </div>

        <div class="footer">
          <div class="help">Consejo: mant√©n los dedos en <b>F</b> y <b>J</b> (marcadas en teclados f√≠sicos). Usa la mano opuesta al presionar <i>Shift</i>.</div>
        </div>
      </div>
    </section>

    <aside class="card side">
      <h3>üìâ Errores cometidos</h3>
      <div id="mistakes" class="list" aria-live="polite"></div>
      <h3>üìî Registro r√°pido</h3>
      <div class="list" id="log"></div>
    </aside>
  </div>

  <canvas class="confetti" id="confetti" width="0" height="0" aria-hidden="true"></canvas>
  <div class="toast" id="toast">¬°Buen ritmo!</div>

  <script>
  (function(){
    const HOME = ['a','s','d','f','g','h','j','k','l','√±'];
    const targetEl = document.getElementById('target');
    const scoreEl = document.getElementById('score');
    const accEl = document.getElementById('accuracy');
    const errEl = document.getElementById('errorsCount');
    const barEl = document.getElementById('bar');
    const mistakesEl = document.getElementById('mistakes');
    const logEl = document.getElementById('log');
    const toast = document.getElementById('toast');

    const keys = [...document.querySelectorAll('.key')];
    const byKey = Object.fromEntries(keys.map(k=>[k.dataset.k,k]));

    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');

    let active=false, score=0, errors=0, total=0, current='‚Äî';

    function pick(){
      current = HOME[Math.floor(Math.random()*HOME.length)];
      targetEl.textContent = current.toUpperCase();
      // highlight visual key
      keys.forEach(k=>k.classList.remove('active'));
      const k = byKey[current];
      if(k) k.classList.add('active');
      hint(`Presiona la tecla <b>${current.toUpperCase()}</b>`);
    }

    function hint(html){
      const h = document.getElementById('hint');
      h.innerHTML = html;
    }

    function updateHUD(){
      scoreEl.textContent = `${score} / 10`;
      const acc = total ? Math.max(0, Math.round(( (total-errors)/total )*100 )) : 100;
      accEl.textContent = acc + '%';
      errEl.textContent = errors;
      barEl.style.width = `${(score/10)*100}%`;
    }

    function pushMistake(pressed){
      const item = document.createElement('div');
      item.className = 'mistake';
      item.innerHTML = `<span class="tag">${pressed === ' ' ? '‚éµ espacio' : pressed.toUpperCase()}</span>
                        ‚Üí deb√≠a ser <b>${current.toUpperCase()}</b>`;
      mistakesEl.prepend(item);
    }

    function pushLog(ok){
      const row = document.createElement('div');
      row.className = 'stat';
      const emoji = ok ? '‚úÖ' : '‚ùå';
      row.innerHTML = `${emoji} ${ok? 'Correcto' : 'Incorrecto'}: <b>${current.toUpperCase()}</b>`;
      logEl.prepend(row);
    }

    function toastMsg(msg){
      toast.textContent = msg; toast.classList.add('show');
      setTimeout(()=>toast.classList.remove('show'), 1000);
    }

    // mini confetti when finishing
    const confetti = document.getElementById('confetti');
    const ctx = confetti.getContext('2d');
    function resizeCanvas(){ confetti.width = innerWidth; confetti.height = innerHeight; }
    window.addEventListener('resize', resizeCanvas); resizeCanvas();
    function shootConfetti(){
      const pieces = Array.from({length: 140}, ()=>({
        x: Math.random()*confetti.width,
        y: -10,
        s: 2+Math.random()*4,
        v: 2+Math.random()*3,
        r: Math.random()*Math.PI,
        w: 4+Math.random()*6,
        h: 8+Math.random()*12
      }));
      let frames=0;
      const anim = ()=>{
        ctx.clearRect(0,0,confetti.width,confetti.height);
        pieces.forEach(p=>{
          p.y += p.v; p.r += .05; ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.r);
          ctx.fillStyle = `hsl(${(p.y/4)%360}, 100%, 60%)`;
          ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h); ctx.restore();
        });
        frames++;
        if(frames<140) requestAnimationFrame(anim);
        else ctx.clearRect(0,0,confetti.width,confetti.height);
      };
      anim();
    }

    function start(){
      active=true; score=0; errors=0; total=0; mistakesEl.innerHTML=''; logEl.innerHTML='';
      updateHUD(); pick(); toastMsg('¬°Vamos!');
    }

    function reset(){ active=false; score=0; errors=0; total=0; updateHUD(); keys.forEach(k=>k.classList.remove('active')); targetEl.textContent='‚Äî'; hint('Pulsa <b>Iniciar</b> para empezar.'); }

    document.addEventListener('keydown', (ev)=>{
      if(!active) return;
      const key = normalizeKey(ev.key);
      if(!key) return; // ignore non-chars
      total++;
      if(key === current){
        score++; pushLog(true); toastMsg(rando(['¬°Bien!','¬°Genial!','¬°Exacto!','¬°Eso!']));
        if(score>=10){
          finish();
        } else {
          pick();
        }
      } else {
        errors++; pushMistake(key); pushLog(false); shake(targetEl); toastMsg('Sigue, t√∫ puedes');
      }
      updateHUD();
    });

    function finish(){
      active=false; updateHUD();
      hint('¬°Nivel completado! Presiona <b>Reiniciar</b> para volver a jugar.');
      targetEl.textContent = '‚úî';
      keys.forEach(k=>k.classList.remove('active'));
      shootConfetti();
    }

    function normalizeKey(k){
      if(!k) return '';
      const lower = k.toLowerCase();
      // Spanish √± support
      if(lower === '√±' || lower === '√É¬±' || lower === '¬∫') return '√±';
      if(lower.length === 1 && /[a-z√±]/.test(lower)) return lower;
      if(k === ' ') return ' ';
      return '';
    }

    function rando(arr){ return arr[Math.floor(Math.random()*arr.length)] }

    function shake(el){
      el.animate([
        { transform:'translateX(0)' },
        { transform:'translateX(-6px)' },
        { transform:'translateX(6px)' },
        { transform:'translateX(0)' }
      ], { duration:180, iterations:1, easing:'ease-out' });
    }

    startBtn.addEventListener('click', start);
    resetBtn.addEventListener('click', reset);

  })();
  </script>
</body>
</html>

