
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tesauros en Investigaci√≥n | Presentaci√≥n Interactiva</title>

  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body{
      font-family:'Inter', sans-serif;
      background:#0a0e27;
      color:#2c3e50;
      overflow:hidden;
      height:100vh;
    }

    /* ===== FORMULARIO DE REGISTRO ===== */
    .registro-screen{
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:40px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .registro-card{
      background:#fff;
      border-radius:20px;
      box-shadow:0 30px 80px rgba(0,0,0,0.3);
      padding:60px 50px;
      max-width:600px;
      width:100%;
      animation: slideIn 0.5s ease;
    }

    @keyframes slideIn{
      from{ opacity:0; transform:translateY(-30px); }
      to{ opacity:1; transform:translateY(0); }
    }

    .registro-card h1{
      color:#667eea;
      font-family:'Libre Baskerville', serif;
      font-size:2.2em;
      margin-bottom:15px;
      text-align:center;
    }

    .registro-card .subtitle{
      color:#666;
      text-align:center;
      margin-bottom:40px;
      font-size:1.05em;
      line-height:1.6;
    }

    .form-group{
      margin-bottom:25px;
    }

    .form-group label{
      display:block;
      font-weight:700;
      color:#2c3e50;
      margin-bottom:8px;
      font-size:0.95em;
    }

    .form-group input{
      width:100%;
      padding:15px;
      border:2px solid #dfe6e9;
      border-radius:10px;
      font-size:1em;
      font-family:'Inter', sans-serif;
      transition:all 0.3s;
      background:#fff;
    }

    .form-group input:focus{
      outline:none;
      border-color:#667eea;
      box-shadow:0 0 0 4px rgba(102,126,234,0.1);
    }

    .form-group input::placeholder{
      color:#bdc3c7;
    }

    .btn-comenzar{
      width:100%;
      background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color:#fff;
      border:none;
      padding:18px;
      font-size:1.1em;
      font-weight:700;
      border-radius:10px;
      cursor:pointer;
      transition:all 0.3s;
      margin-top:15px;
      text-transform:uppercase;
      letter-spacing:1px;
    }

    .btn-comenzar:hover{
      transform:translateY(-2px);
      box-shadow:0 10px 30px rgba(102,126,234,0.4);
    }

    .btn-comenzar:disabled{
      background:#95a5a6;
      cursor:not-allowed;
      transform:none;
      box-shadow:none;
    }

    .error-message{
      color:#e74c3c;
      font-size:0.9em;
      margin-top:8px;
      display:none;
      font-weight:600;
    }

    .error-message.show{
      display:block;
    }

    /* ===== PRESENTACI√ìN ===== */
    .presentation-wrapper{
      height:100vh;
      display:none;
      align-items:center;
      justify-content:center;
      padding:40px;
    }

    .presentation-wrapper.active{
      display:flex;
    }

    .slide{
      background:#fff;
      width:100%;
      max-width:1400px;
      height:85vh;
      border-radius:0;
      box-shadow:0 20px 60px rgba(0,0,0,0.5);
      display:none;
      flex-direction:column;
      position:relative;
    }

    .slide.active{ display:flex; animation:fadeIn .45s ease; }
    @keyframes fadeIn{ from{opacity:0; transform:scale(.985);} to{opacity:1; transform:scale(1);} }

    .slide-header{
      background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
      padding:34px 56px;
      color:#fff;
      border-bottom:4px solid #e74c3c;
      flex-shrink:0;
    }
    .slide-number{
      font-size:13px;
      font-weight:300;
      letter-spacing:2px;
      opacity:.85;
      margin-bottom:8px;
      text-transform:uppercase;
    }
    .slide-title{
      font-family:'Libre Baskerville', serif;
      font-size:40px;
      font-weight:700;
      line-height:1.2;
    }

    .slide-content{
      flex:1;
      padding:40px 56px;
      overflow-y:auto;
      min-height:0;
    }
    .slide-content::-webkit-scrollbar{ width:8px; }
    .slide-content::-webkit-scrollbar-track{ background:#f1f1f1; }
    .slide-content::-webkit-scrollbar-thumb{ background:#bdc3c7; border-radius:4px; }

    .slide-footer{
      padding:18px 56px;
      border-top:1px solid #ecf0f1;
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:#fafafa;
      gap:16px;
      flex-shrink:0;
    }
    .progress-indicator{
      font-size:13px;
      color:#95a5a6;
      font-weight:600;
      white-space:nowrap;
    }

    /* Botones */
    .btn{
      padding:12px 26px;
      border:none;
      border-radius:4px;
      font-family:'Inter', sans-serif;
      font-size:14px;
      font-weight:700;
      cursor:pointer;
      transition:all .18s ease;
      text-transform:uppercase;
      letter-spacing:.5px;
    }
    .btn-nav{
      background:transparent;
      color:#7f8c8d;
      border:2px solid #bdc3c7;
    }
    .btn-nav:hover{ background:#ecf0f1; border-color:#95a5a6; }
    .btn-primary{
      background:#e74c3c;
      color:#fff;
      border:2px solid #e74c3c;
    }
    .btn-primary:hover{
      background:#c0392b;
      border-color:#c0392b;
      transform:translateY(-2px);
      box-shadow:0 4px 12px rgba(231,76,60,.28);
    }
    .btn-secondary{
      background:transparent;
      color:#3498db;
      border:2px solid #3498db;
    }
    .btn-secondary:hover{ background:#3498db; color:#fff; }
    .btn:disabled{ opacity:.45; cursor:not-allowed; transform:none !important; box-shadow:none !important; }

    /* Tipograf√≠a */
    h2{
      font-family:'Libre Baskerville', serif;
      font-size:30px;
      color:#2c3e50;
      margin-bottom:18px;
      padding-bottom:10px;
      border-bottom:3px solid #e74c3c;
      display:inline-block;
    }
    h3{
      font-family:'Libre Baskerville', serif;
      font-size:20px;
      color:#34495e;
      margin:22px 0 12px;
    }
    h4{
      font-family:'Libre Baskerville', serif;
      font-size:17px;
      color:#2c3e50;
      margin-bottom:10px;
    }
    p{
      font-size:16.5px;
      line-height:1.7;
      color:#2c3e50;
      margin-bottom:14px;
    }
    code{
      background:#f1f3f4;
      padding:3px 8px;
      border-radius:3px;
      font-family:'Courier New', monospace;
      color:#e74c3c;
      font-size:13px;
    }

    /* Cards */
    .info-card{
      background:#ecf9ff;
      border-left:5px solid #3498db;
      padding:18px 20px;
      margin:18px 0;
    }
    .info-card-title{
      font-weight:800;
      font-size:16.5px;
      color:#2980b9;
      margin-bottom:10px;
    }
    .warning-card{
      background:#fff4e6;
      border-left:5px solid #f39c12;
      padding:18px 20px;
      margin:18px 0;
    }
    .warning-card-title{
      font-weight:800;
      font-size:16.5px;
      color:#e67e22;
      margin-bottom:10px;
    }
    .success-card{
      background:#e8f8f5;
      border-left:5px solid #27ae60;
      padding:18px 20px;
      margin:18px 0;
    }
    .success-card-title{
      font-weight:800;
      font-size:16.5px;
      color:#27ae60;
      margin-bottom:10px;
    }

    /* Listas */
    .content-list{ list-style:none; padding:0; }
    .content-list li{
      padding:8px 0 8px 26px;
      position:relative;
      font-size:16.5px;
      line-height:1.6;
      color:#2c3e50;
    }
    .content-list li::before{
      content:"‚ñ∏";
      position:absolute;
      left:0;
      color:#e74c3c;
      font-size:18px;
      font-weight:800;
    }

    /* Paneles / columnas */
    .two-columns{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:18px;
      margin:16px 0;
      align-items:start;
    }
    .panel{
      background:#f8f9fa;
      border:1px solid #ecf0f1;
      border-radius:4px;
      padding:16px 18px;
    }

    /* Preguntas */
    .question-area{
      background:#f8fbff;
      border:2px solid rgba(52,152,219,.22);
      border-radius:4px;
      padding:16px 18px;
      margin-top:14px;
    }
    .question-title{
      font-weight:800;
      font-size:17px;
      color:#2c3e50;
      margin-bottom:12px;
    }

    /* Opci√≥n radio */
    .options-grid{ display:grid; gap:10px; }
    .option-card{
      background:#fff;
      border:2px solid #dfe6e9;
      border-radius:4px;
      padding:14px 14px;
      cursor:pointer;
      transition:all .15s ease;
      display:flex;
      align-items:center;
      gap:12px;
    }
    .option-card:hover{ border-color:#3498db; background:#f8f9fa; }
    .option-card.selected{ border-color:#3498db; background:#ecf9ff; }
    .option-radio{
      width:18px; height:18px;
      border:2px solid #bdc3c7;
      border-radius:50%;
      position:relative;
      flex-shrink:0;
    }
    .option-card.selected .option-radio{ border-color:#3498db; }
    .option-card.selected .option-radio::after{
      content:'';
      position:absolute;
      top:50%; left:50%;
      transform:translate(-50%,-50%);
      width:9px; height:9px;
      background:#3498db;
      border-radius:50%;
    }
    .option-text{ font-size:16.5px; color:#2c3e50; }

    /* Checkbox cards */
    .checkbox-grid{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:10px;
    }
    .checkbox-card{
      background:#fff;
      border:2px solid #dfe6e9;
      border-radius:4px;
      padding:14px 14px;
      cursor:pointer;
      transition:all .15s ease;
      display:flex;
      align-items:center;
      gap:12px;
    }
    .checkbox-card:hover{ border-color:#3498db; background:#f8f9fa; }
    .checkbox-card.selected{ border-color:#3498db; background:#ecf9ff; }
    .option-checkbox{
      width:18px; height:18px;
      border:2px solid #bdc3c7;
      border-radius:4px;
      position:relative;
      flex-shrink:0;
      background:#fff;
    }
    .checkbox-card.selected .option-checkbox{
      border-color:#3498db;
      background:#3498db;
    }
    .checkbox-card.selected .option-checkbox::after{
      content:'';
      position:absolute;
      top:1px; left:5px;
      width:5px; height:10px;
      border:solid #fff;
      border-width:0 2px 2px 0;
      transform:rotate(45deg);
    }

    /* Inputs compactos */
    input[type="text"], textarea, select{
      width:100%;
      padding:10px 10px;
      border:2px solid #dfe6e9;
      border-radius:4px;
      font-family:'Inter', sans-serif;
      font-size:14px;
      transition:border-color .2s;
      background:#fff;
      color:#2c3e50;
      line-height:1.35;
    }
    input[type="text"]:focus, textarea:focus, select:focus{
      outline:none; border-color:#3498db;
    }
    textarea{
      min-height:110px;
      resize:vertical;
      font-family:'Courier New', monospace;
    }

    /* Tabla */
    .data-table{
      width:100%;
      border-collapse:collapse;
      border:1px solid #dfe6e9;
      margin:16px 0;
    }
    .data-table th{
      background:#34495e;
      color:#fff;
      padding:12px 12px;
      text-align:left;
      font-weight:800;
      font-size:13.5px;
    }
    .data-table td{
      padding:10px 12px;
      border-bottom:1px solid #ecf0f1;
      vertical-align:middle;
      font-size:14.5px;
      color:#2c3e50;
    }
    .data-table tbody tr:nth-child(even){ background:#f8f9fa; }

    /* Feedback */
    .feedback{
      padding:14px 16px;
      border-radius:4px;
      margin-top:12px;
      display:none;
      font-weight:700;
    }
    .feedback.show{ display:block; }
    .feedback.success{ background:#e8f8f5; border-left:5px solid #27ae60; color:#27ae60; }
    .feedback.error{ background:#fadbd8; border-left:5px solid #e74c3c; color:#c0392b; }
    .feedback.partial{ background:#fff4e6; border-left:5px solid #f39c12; color:#e67e22; }
    .feedback-title{ font-weight:900; margin-bottom:6px; }
    .feedback-text{ font-weight:700; opacity:.95; line-height:1.55; }

    /* Helper */
    .helper{
      font-size:13.5px;
      color:#7f8c8d;
      margin-top:10px;
      display:flex;
      gap:8px;
      align-items:flex-start;
    }
    .helper .icon{ font-size:15px; }

    /* Botones en l√≠nea */
    .btn-row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin:16px 0;
    }

    /* Caja c√≥digo ecuaci√≥n */
    .code-box{
      background:#f8f9fa;
      border:1px solid #dfe6e9;
      border-left:5px solid #3498db;
      border-radius:4px;
      padding:14px 16px;
      font-family:'Courier New', monospace;
      font-size:14px;
      line-height:1.7;
      white-space:pre-wrap;
      word-break:break-word;
      margin:14px 0;
    }

    /* Links */
    .resource-row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .resource-row a{
      text-decoration:none;
      color:#2c3e50;
      background:#fff;
      border:2px solid #dfe6e9;
      padding:10px 12px;
      border-radius:4px;
      font-weight:800;
      font-size:13px;
      transition:all .15s ease;
    }
    .resource-row a:hover{
      border-color:#3498db;
      background:#ecf9ff;
      transform:translateY(-1px);
    }

    /* Instrucciones de tesauros */
    .thesaurus-guide{
      background:#fff;
      border:2px solid #3498db;
      border-radius:8px;
      padding:20px;
      margin:16px 0;
    }
    .thesaurus-guide h4{
      color:#3498db;
      margin-bottom:12px;
      font-size:18px;
    }
    .step-box{
      background:#f8f9fa;
      border-left:4px solid #27ae60;
      padding:12px 16px;
      margin:10px 0;
      border-radius:4px;
    }
    .step-number{
      background:#27ae60;
      color:#fff;
      width:28px;
      height:28px;
      border-radius:50%;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-weight:800;
      margin-right:10px;
      font-size:14px;
    }
    .step-content{
      display:inline-block;
      vertical-align:middle;
      font-size:15px;
      line-height:1.6;
    }

    /* Pantalla de finalizaci√≥n */
    .completion-card{
      background:#fff;
      border-radius:12px;
      padding:40px;
      max-width:700px;
      margin:0 auto;
      box-shadow:0 10px 40px rgba(0,0,0,0.1);
    }

    .completion-icon{
      width:80px;
      height:80px;
      background:#27ae60;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      margin:0 auto 25px;
      font-size:40px;
    }

    .student-data{
      background:#f8f9fa;
      border:2px solid #ecf0f1;
      border-radius:8px;
      padding:25px;
      margin:25px 0;
    }

    .student-data h3{
      color:#2c3e50;
      margin-bottom:18px;
      font-size:18px;
    }

    .data-item{
      display:flex;
      padding:12px 0;
      border-bottom:1px solid #ecf0f1;
    }

    .data-item:last-child{
      border-bottom:none;
    }

    .data-label{
      font-weight:700;
      color:#7f8c8d;
      min-width:150px;
      font-size:14px;
    }

    .data-value{
      color:#2c3e50;
      font-weight:600;
      font-size:15px;
    }

    /* Responsive */
    @media (max-width: 1200px){
      .slide-title{ font-size:34px; }
      .two-columns{ grid-template-columns:1fr; }
      .checkbox-grid{ grid-template-columns:1fr; }
    }
    @media (max-width: 768px){
      .presentation-wrapper{ padding:0; }
      .slide{ height:100vh; border-radius:0; }
      .slide-header,.slide-footer{ padding:20px; }
      .slide-content{ padding:20px; }
      .slide-title{ font-size:26px; }
      .registro-card{ padding:40px 30px; }
    }
  </style>
</head>

<body>
  <!-- ===== PANTALLA DE REGISTRO ===== -->
  <div class="registro-screen" id="registroScreen">
    <div class="registro-card">
      <h1>Tesauros en Investigaci√≥n</h1>
      <p class="subtitle">Por favor, ingresa tus datos para comenzar la actividad educativa</p>
      
      <form id="registroForm" onsubmit="return false;">
        <div class="form-group">
          <label for="nombreCompleto">Nombre completo *</label>
          <input 
            type="text" 
            id="nombreCompleto" 
            placeholder="Ingresa tu nombre completo"
            required
          >
          <div class="error-message" id="errorNombre">Por favor ingresa tu nombre completo</div>
        </div>

        <div class="form-group">
          <label for="nrc">NRC *</label>
          <input 
            type="text" 
            id="nrc" 
            placeholder="Ingresa el NRC del curso"
            required
          >
          <div class="error-message" id="errorNrc">Por favor ingresa el NRC</div>
        </div>

        <div class="form-group">
          <label for="grupo">N√∫mero de grupo *</label>
          <input 
            type="text" 
            id="grupo" 
            placeholder="Ingresa tu n√∫mero de grupo"
            required
          >
          <div class="error-message" id="errorGrupo">Por favor ingresa tu n√∫mero de grupo</div>
        </div>

        <button type="button" class="btn-comenzar" onclick="validarRegistro()">
          Comenzar Presentaci√≥n
        </button>
      </form>
    </div>
  </div>

  <!-- ===== PRESENTACI√ìN ===== -->
  <div class="presentation-wrapper" id="presentationWrapper">

    <!-- SLIDE 1 / 8 -->
    <section class="slide active">
      <header class="slide-header">
        <div class="slide-number">INTRODUCCI√ìN</div>
        <h1 class="slide-title">Uso de Tesauros en Investigaci√≥n</h1>
      </header>

      <div class="slide-content">
        <div class="info-card">
          <div class="info-card-title">Objetivo</div>
          <p>Aprender a <strong>normalizar t√©rminos</strong> con tesauros para construir una <strong>ecuaci√≥n booleana</strong> y buscar evidencia con m√°s precisi√≥n en cualquier √°rea de conocimiento.</p>
        </div>

        <h2>Idea central</h2>
        <ul class="content-list">
          <li>Un tesauro asigna a cada concepto un <strong>nombre oficial</strong> llamado <strong>Descriptor</strong>.</li>
          <li>Buscar con descriptores reduce p√©rdidas por sin√≥nimos y variaciones.</li>
          <li>Esta t√©cnica aplica a todas las disciplinas: ciencias de la salud, educaci√≥n, dise√±o, comunicaci√≥n, negocios, etc.</li>
        </ul>

        <div class="warning-card">
          <div class="warning-card-title">Caso pr√°ctico (ejemplo del √°rea de salud)</div>
          <p><strong>Tema:</strong> lesiones del tend√≥n de Aquiles en atletas de carrera de larga distancia.</p>
        </div>
      </div>

      <footer class="slide-footer">
        <div class="progress-indicator">1 de 8</div>
        <button class="btn btn-primary" onclick="nextSlide()">COMENZAR ‚Üí</button>
      </footer>
    </section>

    <!-- SLIDE 2 / 8 -->
    <section class="slide">
      <header class="slide-header">
        <div class="slide-number">PASO 1</div>
        <h1 class="slide-title">Concepto principal</h1>
      </header>

      <div class="slide-content">
        <h2>Elegir bien el inicio</h2>

        <div class="two-columns">
          <div class="panel">
            <h4>Regla</h4>
            <ul class="content-list">
              <li>Empieza por el concepto <strong>m√°s espec√≠fico</strong> de tu tema.</li>
              <li>Evita t√©rminos muy generales (generan demasiados resultados irrelevantes).</li>
            </ul>
          </div>
          <div class="panel">
            <h4>Del tema de ejemplo</h4>
            <p style="margin:0;">Tenemos: "lesiones", "tend√≥n de Aquiles", "atletas", "carrera de larga distancia".</p>
          </div>
        </div>

        <div class="question-area">
          <div class="question-title">¬øCu√°l es el mejor concepto para buscar primero en el tesauro?</div>
          <div class="options-grid">
            <div class="option-card" onclick="selectOption(this, 'lesiones')">
              <div class="option-radio"></div><div class="option-text">Lesiones</div>
            </div>
            <div class="option-card" onclick="selectOption(this, 'tendon')">
              <div class="option-radio"></div><div class="option-text">Tend√≥n de Aquiles</div>
            </div>
            <div class="option-card" onclick="selectOption(this, 'atletas')">
              <div class="option-radio"></div><div class="option-text">Atletas</div>
            </div>
            <div class="option-card" onclick="selectOption(this, 'carrera')">
              <div class="option-radio"></div><div class="option-text">Carrera de larga distancia</div>
            </div>
          </div>

          <div id="feedback2" class="feedback"></div>
        </div>
      </div>

      <footer class="slide-footer">
        <button class="btn btn-nav" onclick="prevSlide()">‚Üê ANTERIOR</button>
        <div class="progress-indicator">2 de 8</div>
        <button class="btn btn-primary" onclick="checkStep2()">VERIFICAR ‚Üí</button>
      </footer>
    </section>

    <!-- SLIDE 3 / 8 -->
    <section class="slide">
      <header class="slide-header">
        <div class="slide-number">CONCEPTO CLAVE</div>
        <h1 class="slide-title">¬øQu√© es un descriptor?</h1>
      </header>

      <div class="slide-content">
        <h2>Definici√≥n operativa</h2>

        <div class="info-card">
          <div class="info-card-title">Descriptor</div>
          <p>Es el <strong>nombre oficial</strong> del concepto en el tesauro (lenguaje controlado). Es el t√©rmino que debes usar al buscar en bases de datos.</p>
        </div>

        <div class="warning-card">
          <div class="warning-card-title">Descriptor preferido</div>
          <p>Si buscas un t√©rmino, el tesauro puede mostrarte un <strong>descriptor preferido distinto</strong>. Ese es el t√©rmino correcto que debes copiar y usar.</p>
        </div>

        <h3>Qu√© har√°s despu√©s</h3>
        <ul class="content-list">
          <li>Elegir el tesauro adecuado para tu √°rea (MeSH, DeCS, ERIC, UNESCO, etc.).</li>
          <li>Traducir al ingl√©s <strong>solo si el tesauro lo requiere</strong> (como MeSH).</li>
          <li>Copiar el descriptor oficial y sus sin√≥nimos.</li>
        </ul>
      </div>

      <footer class="slide-footer">
        <button class="btn btn-nav" onclick="prevSlide()">‚Üê ANTERIOR</button>
        <div class="progress-indicator">3 de 8</div>
        <button class="btn btn-primary" onclick="nextSlide()">CONTINUAR ‚Üí</button>
      </footer>
    </section>

    <!-- SLIDE 4 / 8 - GU√çA DE USO DE TESAUROS (SIN EJEMPLOS ESPEC√çFICOS) -->
    <section class="slide">
      <header class="slide-header">
        <div class="slide-number">GU√çA PR√ÅCTICA</div>
        <h1 class="slide-title">C√≥mo usar cada tesauro</h1>
      </header>

      <div class="slide-content">
        <h2>Tesauros por √°rea de conocimiento</h2>

        <div class="thesaurus-guide">
          <h4>üîµ MeSH (Medical Subject Headings)</h4>
          <p style="margin-bottom:8px;"><strong>√Årea:</strong> Ciencias de la Salud, Medicina, Biomedicina</p>
          <p style="margin-bottom:12px;"><strong>Idioma:</strong> Ingl√©s | <strong>URL:</strong> <a href="https://meshb.nlm.nih.gov/" target="_blank" style="color:#3498db;">meshb.nlm.nih.gov</a></p>
          
          <div class="step-box">
            <span class="step-number">1</span>
            <span class="step-content"><strong>Busca tu t√©rmino</strong> en ingl√©s en la barra de b√∫squeda superior</span>
          </div>
          
          <div class="step-box">
            <span class="step-number">2</span>
            <span class="step-content"><strong>Haz clic</strong> en el resultado que aparece en la lista</span>
          </div>
          
          <div class="step-box">
            <span class="step-number">3</span>
            <span class="step-content">Se abrir√° una p√°gina con <strong>varias pesta√±as</strong> en la parte superior</span>
          </div>
          
          <div class="step-box">
            <span class="step-number">4</span>
            <span class="step-content"><strong>Permanece en la primera pesta√±a "Details"</strong> (ignora las dem√°s)</span>
          </div>
          
          <div class="step-box">
            <span class="step-number">5</span>
            <span class="step-content"><strong>Copia el "MeSH Heading"</strong> (aparece destacado al inicio) ‚Üí Este es tu <strong>DESCRIPTOR OFICIAL</strong></span>
          </div>

          <div class="step-box">
            <span class="step-number">6</span>
            <span class="step-content"><strong>Busca "Entry Term(s)"</strong> en la misma p√°gina ‚Üí Estos son tus <strong>SIN√ìNIMOS</strong> (copia al menos 1 o 2)</span>
          </div>

          <div class="warning-card" style="margin:12px 0 0;">
            <div class="warning-card-title">‚ö†Ô∏è ¬øNo encuentras tu t√©rmino exacto?</div>
            <p style="margin:0;">Si tu palabra clave no aparece en MeSH, intenta: <strong>1)</strong> Traducir sin√≥nimos de la misma palabra y buscar esos. <strong>2)</strong> Usar un t√©rmino m√°s general o relacionado. <strong>3)</strong> Revisar los "Entry Terms" de conceptos similares.</p>
          </div>
        </div>

        <div class="thesaurus-guide">
          <h4>üü¢ DeCS (Descriptores en Ciencias de la Salud)</h4>
          <p style="margin-bottom:8px;"><strong>√Årea:</strong> Ciencias de la Salud (Am√©rica Latina)</p>
          <p style="margin-bottom:12px;"><strong>Idioma:</strong> Espa√±ol, Portugu√©s | <strong>URL:</strong> <a href="https://decs.bvsalud.org/" target="_blank" style="color:#27ae60;">decs.bvsalud.org</a></p>
          
          <div class="step-box">
            <span class="step-number">1</span>
            <span class="step-content"><strong>Busca tu t√©rmino</strong> en espa√±ol en la barra de b√∫squeda</span>
          </div>
          
          <div class="step-box">
            <span class="step-number">2</span>
            <span class="step-content"><strong>Haz clic</strong> en el resultado relevante</span>
          </div>
          
          <div class="step-box">
            <span class="step-number">3</span>
            <span class="step-content"><strong>Busca la secci√≥n "Descriptor"</strong> en la informaci√≥n mostrada</span>
          </div>
          
          <div class="step-box">
            <span class="step-number">4</span>
            <span class="step-content"><strong>Copia el t√©rmino preferido</strong> (generalmente en negrita) ‚Üí Este es tu <strong>DESCRIPTOR OFICIAL</strong></span>
          </div>

          <div class="step-box">
            <span class="step-number">5</span>
            <span class="step-content"><strong>Busca "Sin√≥nimos" o t√©rminos relacionados</strong> listados en la misma p√°gina ‚Üí Estos son tus <strong>SIN√ìNIMOS</strong></span>
          </div>

          <div class="warning-card" style="margin:12px 0 0;">
            <div class="warning-card-title">‚ö†Ô∏è ¬øNo encuentras tu t√©rmino?</div>
            <p style="margin:0;">Prueba buscar sin√≥nimos de tu palabra clave o t√©rminos m√°s generales. DeCS suele tener variantes en espa√±ol.</p>
          </div>
        </div>

        <div class="thesaurus-guide">
          <h4>üü† ERIC (Education Resources Information Center)</h4>
          <p style="margin-bottom:8px;"><strong>√Årea:</strong> Educaci√≥n, Pedagog√≠a</p>
          <p style="margin-bottom:12px;"><strong>Idioma:</strong> Ingl√©s | <strong>URL:</strong> <a href="https://eric.ed.gov/" target="_blank" style="color:#e67e22;">eric.ed.gov</a></p>
          
          <div class="step-box">
            <span class="step-number">1</span>
            <span class="step-content"><strong>Busca tu t√©rmino</strong> en la barra de b√∫squeda</span>
          </div>
          
          <div class="step-box">
            <span class="step-number">2</span>
            <span class="step-content"><strong>Busca "ERIC Descriptors"</strong> en los resultados o usa el tesauro oficial</span>
          </div>
          
          <div class="step-box">
            <span class="step-number">3</span>
            <span class="step-content"><strong>Copia el descriptor oficial</strong> y anota t√©rminos relacionados que aparezcan como sin√≥nimos</span>
          </div>

          <div class="warning-card" style="margin:12px 0 0;">
            <div class="warning-card-title">‚ö†Ô∏è Estrategia de b√∫squeda</div>
            <p style="margin:0;">Si tu t√©rmino no aparece, busca sin√≥nimos en ingl√©s o conceptos relacionados. ERIC tiene un tesauro estructurado con t√©rminos preferidos.</p>
          </div>
        </div>

        <div class="thesaurus-guide">
          <h4>üü£ UNESCO Thesaurus</h4>
          <p style="margin-bottom:8px;"><strong>√Årea:</strong> Ciencias Sociales, Comunicaci√≥n, Cultura, Pol√≠tica</p>
          <p style="margin-bottom:12px;"><strong>Idioma:</strong> Multiling√ºe | <strong>URL:</strong> <a href="https://vocabularies.unesco.org/" target="_blank" style="color:#9b59b6;">vocabularies.unesco.org</a></p>
          
          <div class="step-box">
            <span class="step-number">1</span>
            <span class="step-content"><strong>Selecciona tu idioma</strong> en la parte superior</span>
          </div>
          
          <div class="step-box">
            <span class="step-number">2</span>
            <span class="step-content"><strong>Busca tu t√©rmino</strong> en la barra de b√∫squeda</span>
          </div>
          
          <div class="step-box">
            <span class="step-number">3</span>
            <span class="step-content"><strong>Copia el t√©rmino preferido</strong> (descriptor oficial) y revisa "t√©rminos relacionados" para sin√≥nimos</span>
          </div>

          <div class="warning-card" style="margin:12px 0 0;">
            <div class="warning-card-title">üí° Consejo</div>
            <p style="margin:0;">Si no encuentras tu t√©rmino exacto, busca conceptos m√°s generales o sin√≥nimos. UNESCO tiene t√©rminos en m√∫ltiples idiomas.</p>
          </div>
        </div>

        <div class="success-card">
          <div class="success-card-title">‚úÖ Patr√≥n com√∫n en todos los tesauros</div>
          <ul class="content-list" style="margin:0;">
            <li><strong>Busca</strong> tu t√©rmino en el tesauro de tu √°rea</li>
            <li><strong>Identifica el DESCRIPTOR OFICIAL:</strong> MeSH Heading (MeSH), Descriptor preferido (DeCS/UNESCO), o t√©rmino principal (ERIC)</li>
            <li><strong>Anota SIN√ìNIMOS:</strong> Entry Term(s) (MeSH), Sin√≥nimos (DeCS), Related Terms (otros tesauros)</li>
            <li><strong>Si no encuentras tu t√©rmino:</strong> Busca sin√≥nimos de la misma palabra, prueba t√©rminos relacionados o conceptos m√°s generales</li>
            <li><strong>Copia exactamente</strong> como aparece (respeta may√∫sculas y acentos)</li>
          </ul>
        </div>
      </div>

      <footer class="slide-footer">
        <button class="btn btn-nav" onclick="prevSlide()">‚Üê ANTERIOR</button>
        <div class="progress-indicator">4 de 8</div>
        <button class="btn btn-primary" onclick="nextSlide()">ENTENDIDO ‚Üí</button>
      </footer>
    </section>

    <!-- SLIDE 5 / 8 - NORMALIZACI√ìN CON COLUMNA DE SIN√ìNIMOS -->
    <section class="slide">
      <header class="slide-header">
        <div class="slide-number">PASO 2</div>
        <h1 class="slide-title">Normaliza en tesauros</h1>
      </header>

      <div class="slide-content">
        <h2>Proceso de normalizaci√≥n</h2>

        <div class="info-card">
          <div class="info-card-title">Pasos a seguir:</div>
          <ul class="content-list">
            <li><strong>1. Elige tesauro</strong> seg√∫n tu √°rea de estudio</li>
            <li><strong>2. Traduce si es necesario</strong> (algunos tesauros como MeSH requieren ingl√©s)</li>
            <li><strong>3. Busca</strong> cada t√©rmino en el tesauro</li>
            <li><strong>4. Copia</strong> el Descriptor oficial y al menos 1 sin√≥nimo</li>
          </ul>
        </div>

        <div style="background:#f8f9fa; border:1px solid #ecf0f1; border-radius:4px; padding:16px; margin:16px 0;">
          <h4>Selecciona tesauro seg√∫n tu √°rea</h4>
          <select id="thesaurus" onchange="onThesaurusChange()" style="margin-top:10px;">
            <option value="">Selecciona...</option>
            <option value="mesh">MeSH ‚Äî Salud/Biomedicina</option>
            <option value="decs">DeCS ‚Äî Salud (LatAm)</option>
            <option value="eric">ERIC ‚Äî Educaci√≥n</option>
            <option value="unesco">UNESCO ‚Äî Cs. Sociales/Comunicaci√≥n</option>
          </select>

          <div class="btn-row">
            <button class="btn btn-secondary" onclick="openTranslator()">ABRIR TRADUCTOR</button>
            <button class="btn btn-primary" id="open-thesaurus-btn" onclick="openThesaurus()" disabled>ABRIR TESAURO ‚Üí</button>
          </div>
        </div>

        <h3>Completa la tabla:</h3>
        
        <table class="data-table">
          <thead>
            <tr>
              <th style="width:25%;">Palabra clave</th>
              <th style="width:25%;">Traducci√≥n (si aplica)</th>
              <th style="width:25%;">Descriptor oficial</th>
              <th style="width:25%;">Sin√≥nimos (sep. por comas)</th>
            </tr>
          </thead>
          <tbody id="norm-body"></tbody>
        </table>

        <div class="helper">
          <span class="icon">üí°</span>
          <div>
            <strong>Recuerda:</strong>
            <div style="margin-top:4px;">‚Ä¢ <strong>MeSH:</strong> "MeSH Heading" = Descriptor | "Entry Term(s)" = Sin√≥nimos</div>
            <div style="margin-top:2px;">‚Ä¢ <strong>DeCS:</strong> Busca "Descriptor" y "Sin√≥nimos" en la p√°gina de resultados</div>
            <div style="margin-top:2px;">‚Ä¢ <strong>Si no encuentras tu t√©rmino:</strong> Prueba con sin√≥nimos del mismo concepto o t√©rminos relacionados</div>
          </div>
        </div>

        <div id="norm-feedback" class="feedback error">
          <div class="feedback-title">Atenci√≥n</div>
          <div class="feedback-text">Completa al menos <strong>2 descriptores oficiales</strong> para continuar.</div>
        </div>
      </div>

      <footer class="slide-footer">
        <button class="btn btn-nav" onclick="prevSlide()">‚Üê ANTERIOR</button>
        <div class="progress-indicator">5 de 8</div>
        <button class="btn btn-primary" onclick="validateNormalization()">SIGUIENTE ‚Üí</button>
      </footer>
    </section>

    <!-- SLIDE 6 / 8 - CON OPCIONES DISTRACTORAS -->
    <section class="slide">
      <header class="slide-header">
        <div class="slide-number">PASO 3</div>
        <h1 class="slide-title">T√©rminos relacionados</h1>
      </header>

      <div class="slide-content">
        <h2>Ampl√≠a sin perder foco</h2>
        <p>Adem√°s del concepto principal, necesitas t√©rminos que especifiquen el tipo de problema y el contexto. <strong>No todos los t√©rminos son relevantes para este tema.</strong></p>

        <div class="question-area">
          <div class="question-title">Para el tema "lesiones del tend√≥n de Aquiles en atletas de carrera", selecciona SOLO los t√©rminos que S√ç son relevantes:</div>
          <div class="checkbox-grid">
            <div class="checkbox-card" onclick="toggleCheckbox(this, 'ruptura')">
              <div class="option-checkbox"></div><div class="option-text">Ruptura</div>
            </div>
            <div class="checkbox-card" onclick="toggleCheckbox(this, 'tendinopatia')">
              <div class="option-checkbox"></div><div class="option-text">Tendinopat√≠a</div>
            </div>
            <div class="checkbox-card" onclick="toggleCheckbox(this, 'carrera')">
              <div class="option-checkbox"></div><div class="option-text">Carrera</div>
            </div>
            <div class="checkbox-card" onclick="toggleCheckbox(this, 'atletas')">
              <div class="option-checkbox"></div><div class="option-text">Atletas</div>
            </div>
            <div class="checkbox-card" onclick="toggleCheckbox(this, 'diabetes')">
              <div class="option-checkbox"></div><div class="option-text">Diabetes</div>
            </div>
            <div class="checkbox-card" onclick="toggleCheckbox(this, 'natacion')">
              <div class="option-checkbox"></div><div class="option-text">Nataci√≥n</div>
            </div>
            <div class="checkbox-card" onclick="toggleCheckbox(this, 'nutricion')">
              <div class="option-checkbox"></div><div class="option-text">Nutrici√≥n deportiva</div>
            </div>
            <div class="checkbox-card" onclick="toggleCheckbox(this, 'fisioterapia')">
              <div class="option-checkbox"></div><div class="option-text">Fisioterapia</div>
            </div>
          </div>

          <div id="feedback5" class="feedback"></div>
        </div>
      </div>

      <footer class="slide-footer">
        <button class="btn btn-nav" onclick="prevSlide()">‚Üê ANTERIOR</button>
        <div class="progress-indicator">6 de 8</div>
        <button class="btn btn-primary" onclick="checkRelated()">VERIFICAR ‚Üí</button>
      </footer>
    </section>

    <!-- SLIDE 7 / 8 -->
    <section class="slide">
      <header class="slide-header">
        <div class="slide-number">PASO 4</div>
        <h1 class="slide-title">Construye la ecuaci√≥n</h1>
      </header>

      <div class="slide-content">
        <h2>Operadores booleanos</h2>

        <div class="two-columns">
          <div class="panel">
            <h4>C√≥mo se usa</h4>
            <ul class="content-list">
              <li><code>OR</code> une sin√≥nimos del mismo concepto (ampl√≠a resultados).</li>
              <li><code>AND</code> une conceptos diferentes (reduce y enfoca).</li>
              <li>Par√©ntesis agrupan sin√≥nimos.</li>
            </ul>
          </div>
          <div class="panel">
            <h4>Ejemplo de estructura</h4>
            <p style="margin:0;">
              <code>("Descriptor 1" OR "Sin√≥nimo 1") AND ("Descriptor 2" OR "Sin√≥nimo 2")</code>
            </p>
          </div>
        </div>

        <h3>Tu ecuaci√≥n booleana generada:</h3>
        <div class="code-box" id="equationPreview">(Completa la normalizaci√≥n primero)</div>

        <div class="btn-row">
          <button class="btn btn-secondary" onclick="copyEquation()">üìã COPIAR ECUACI√ìN</button>
          <button class="btn btn-primary" onclick="nextSlide()">CONTINUAR ‚Üí</button>
        </div>

        <div id="feedback6" class="feedback"></div>

        <div class="info-card">
          <div class="info-card-title">¬øD√≥nde usar tu ecuaci√≥n?</div>
          <div class="resource-row">
            <a href="https://pubmed.ncbi.nlm.nih.gov/" target="_blank" rel="noopener noreferrer">PubMed</a>
            <a href="https://www.scopus.com/" target="_blank" rel="noopener noreferrer">Scopus</a>
            <a href="https://www.webofscience.com/" target="_blank" rel="noopener noreferrer">Web of Science</a>
            <a href="https://scholar.google.com/" target="_blank" rel="noopener noreferrer">Google Scholar</a>
            <a href="https://eric.ed.gov/" target="_blank" rel="noopener noreferrer">ERIC</a>
          </div>
        </div>
      </div>

      <footer class="slide-footer">
        <button class="btn btn-nav" onclick="prevSlide()">‚Üê ANTERIOR</button>
        <div class="progress-indicator">7 de 8</div>
        <button class="btn btn-primary" onclick="nextSlide()">FINALIZAR ‚Üí</button>
      </footer>
    </section>

    <!-- SLIDE 8 / 8 - PANTALLA FINAL SIN BOT√ìN DE COPIAR -->
    <section class="slide">
      <header class="slide-header">
        <div class="slide-number">FINALIZACI√ìN</div>
        <h1 class="slide-title">¬°Ejercicio completado!</h1>
      </header>

      <div class="slide-content">
        <div class="completion-card">
          <div class="completion-icon">‚úì</div>
          
          <h2 style="text-align:center; color:#27ae60; margin-bottom:10px;">¬°Excelente trabajo!</h2>
          <p style="text-align:center; color:#7f8c8d; margin-bottom:30px;">
            Has completado exitosamente el ejercicio sobre uso de tesauros en investigaci√≥n
          </p>

          <div class="student-data">
            <h3>üìã Datos del estudiante</h3>
            <div class="data-item">
              <div class="data-label">Nombre:</div>
              <div class="data-value" id="finalNombre">-</div>
            </div>
            <div class="data-item">
              <div class="data-label">NRC:</div>
              <div class="data-value" id="finalNrc">-</div>
            </div>
            <div class="data-item">
              <div class="data-label">Grupo:</div>
              <div class="data-value" id="finalGrupo">-</div>
            </div>
          </div>

          <div class="success-card">
            <div class="success-card-title">üîç Ecuaci√≥n booleana resultante</div>
            <div class="code-box" id="equationFinal" style="margin:10px 0; background:#fff; border-color:#27ae60;">(No se gener√≥ ecuaci√≥n)</div>
          </div>

          <div class="info-card">
            <div class="info-card-title">‚úÖ Competencias desarrolladas</div>
            <ul class="content-list">
              <li><strong>Identificar</strong> el tesauro apropiado para tu √°rea de conocimiento</li>
              <li><strong>Navegar</strong> tesauros especializados y encontrar descriptores oficiales</li>
              <li><strong>Normalizar</strong> terminolog√≠a usando lenguaje controlado</li>
              <li><strong>Construir</strong> ecuaciones booleanas con operadores AND y OR</li>
              <li><strong>Aplicar</strong> estrategias de b√∫squeda reproducibles en bases de datos</li>
            </ul>
          </div>

          <h3>üéØ Aplicaci√≥n en tu √°rea</h3>
          <p>Ahora puedes aplicar esta t√©cnica en las bases de datos de tu disciplina:</p>
          <div class="resource-row">
            <a href="https://pubmed.ncbi.nlm.nih.gov/" target="_blank" rel="noopener noreferrer">PubMed (Salud)</a>
            <a href="https://eric.ed.gov/" target="_blank" rel="noopener noreferrer">ERIC (Educaci√≥n)</a>
            <a href="https://www.scopus.com/" target="_blank" rel="noopener noreferrer">Scopus (Multidisc.)</a>
            <a href="https://www.webofscience.com/" target="_blank" rel="noopener noreferrer">Web of Science</a>
            <a href="https://scholar.google.com/" target="_blank" rel="noopener noreferrer">Google Scholar</a>
          </div>
        </div>
      </div>

      <footer class="slide-footer">
        <button class="btn btn-nav" onclick="prevSlide()">‚Üê ANTERIOR</button>
        <div class="progress-indicator">8 de 8</div>
        <button class="btn btn-primary" onclick="resetAll()">üîÑ REINICIAR</button>
      </footer>
    </section>

  </div>

  <script>
    // ===== Variables globales =====
    let studentData = {
      nombre: '',
      nrc: '',
      grupo: ''
    };

    // ===== Registro inicial =====
    function validarRegistro(){
      const nombre = document.getElementById('nombreCompleto').value.trim();
      const nrc = document.getElementById('nrc').value.trim();
      const grupo = document.getElementById('grupo').value.trim();

      let isValid = true;

      if (!nombre || nombre.length < 3){
        document.getElementById('errorNombre').classList.add('show');
        isValid = false;
      } else {
        document.getElementById('errorNombre').classList.remove('show');
      }

      if (!nrc){
        document.getElementById('errorNrc').classList.add('show');
        isValid = false;
      } else {
        document.getElementById('errorNrc').classList.remove('show');
      }

      if (!grupo){
        document.getElementById('errorGrupo').classList.add('show');
        isValid = false;
      } else {
        document.getElementById('errorGrupo').classList.remove('show');
      }

      if (isValid){
        studentData.nombre = nombre.toUpperCase();
        studentData.nrc = nrc.toUpperCase();
        studentData.grupo = grupo.toUpperCase();

        document.getElementById('registroScreen').style.display = 'none';
        document.getElementById('presentationWrapper').classList.add('active');
      }
    }

    // ===== Navegaci√≥n slides =====
    let currentSlide = 0;
    function showSlide(index){
      const slides = document.querySelectorAll('.slide');
      slides.forEach((s,i)=>s.classList.toggle('active', i===index));
      currentSlide = index;

      if (index === 7){
        document.getElementById('finalNombre').textContent = studentData.nombre;
        document.getElementById('finalNrc').textContent = studentData.nrc;
        document.getElementById('finalGrupo').textContent = studentData.grupo;
        refreshEquationViews();
      }

      if (index === 6 || index === 7) refreshEquationViews();
    }
    
    function nextSlide(){
      const slides = document.querySelectorAll('.slide');
      if (currentSlide < slides.length - 1) showSlide(currentSlide + 1);
    }
    
    function prevSlide(){
      if (currentSlide > 0) showSlide(currentSlide - 1);
    }

    // ===== Slide 2 =====
    let selectedOption = null;
    function selectOption(el, value){
      document.querySelectorAll('.option-card').forEach(c=>c.classList.remove('selected'));
      el.classList.add('selected');
      selectedOption = value;
      clearFeedback('feedback2');
    }
    
    function showFeedback(id, type, title, message){
      const fb = document.getElementById(id);
      fb.className = `feedback ${type} show`;
      fb.innerHTML = `<div class="feedback-title">${title}</div><div class="feedback-text">${message}</div>`;
    }
    
    function clearFeedback(id){
      const fb = document.getElementById(id);
      if (!fb) return;
      fb.className = 'feedback';
      fb.innerHTML = '';
    }
    
    function checkStep2(){
      if (!selectedOption){
        showFeedback('feedback2','error','Selecciona una opci√≥n','Elige el concepto m√°s apropiado para iniciar en el tesauro.');
        return;
      }
      if (selectedOption==='tendon'){
        showFeedback('feedback2','success','¬°Correcto!','El tend√≥n de Aquiles es el concepto m√°s espec√≠fico para iniciar la b√∫squeda.');
        setTimeout(()=>nextSlide(), 800);
      } else if (selectedOption==='lesiones'){
        showFeedback('feedback2','error','Demasiado general','"Lesiones" es muy amplio. Primero necesitas el concepto anat√≥mico espec√≠fico.');
      } else if (selectedOption==='atletas'){
        showFeedback('feedback2','error','Es contexto/poblaci√≥n','"Atletas" es el contexto, no el concepto central. Necesitas primero la estructura anat√≥mica.');
      } else if (selectedOption==='carrera'){
        showFeedback('feedback2','error','Es contexto','"Carrera‚Ä¶" es contexto/actividad. El concepto anat√≥mico/patol√≥gico debe ir primero.');
      }
    }

    // ===== Slide 5 (con sin√≥nimos) =====
    const defaultKeywords = [
      { es: 'tend√≥n de Aquiles', en: '', desc: '', syn: '' },
      { es: 'tendinopat√≠a', en: '', desc: '', syn: '' },
      { es: 'ruptura', en: '', desc: '', syn: '' }
    ];
    let normKeywords = [...defaultKeywords];
    let savedDescriptors = [];
    let savedSynonyms = [];

    function renderNormTable(){
      const tbody = document.getElementById('norm-body');
      tbody.innerHTML = '';

      normKeywords.forEach((row, idx)=>{
        const tr = document.createElement('tr');

        const tdEs = document.createElement('td');
        tdEs.textContent = row.es;
        tdEs.style.fontWeight = '700';

        const tdEn = document.createElement('td');
        const inEn = document.createElement('input');
        inEn.type = 'text';
        inEn.placeholder = 'Si aplica';
        inEn.value = row.en || '';
        inEn.addEventListener('input', (e)=>{ normKeywords[idx].en = e.target.value; });
        tdEn.appendChild(inEn);

        const tdDesc = document.createElement('td');
        const inDesc = document.createElement('input');
        inDesc.type = 'text';
        inDesc.placeholder = 'Descriptor oficial';
        inDesc.className = 'desc-input';
        inDesc.value = row.desc || '';
        inDesc.addEventListener('input', (e)=>{ normKeywords[idx].desc = e.target.value; });
        tdDesc.appendChild(inDesc);

        const tdSyn = document.createElement('td');
        const inSyn = document.createElement('input');
        inSyn.type = 'text';
        inSyn.placeholder = 'Sin√≥nimo1, Sin√≥nimo2';
        inSyn.className = 'syn-input';
        inSyn.value = row.syn || '';
        inSyn.addEventListener('input', (e)=>{ normKeywords[idx].syn = e.target.value; });
        tdSyn.appendChild(inSyn);

        tr.appendChild(tdEs);
        tr.appendChild(tdEn);
        tr.appendChild(tdDesc);
        tr.appendChild(tdSyn);
        tbody.appendChild(tr);
      });
    }

    function onThesaurusChange(){
      const v = document.getElementById('thesaurus').value;
      const btn = document.getElementById('open-thesaurus-btn');
      btn.disabled = !v;
      clearFeedback('norm-feedback');
    }

    function openTranslator(){
      window.open('https://translate.google.com/?sl=es&tl=en', '_blank', 'noopener,noreferrer');
    }

    function openThesaurus(){
      const v = document.getElementById('thesaurus').value;
      const urls = {
        mesh: 'https://meshb.nlm.nih.gov/',
        decs: 'https://decs.bvsalud.org/',
        eric: 'https://eric.ed.gov/',
        unesco: 'https://vocabularies.unesco.org/'
      };
      if (!v || !urls[v]) return;
      window.open(urls[v], '_blank', 'noopener,noreferrer');
    }

    function validateNormalization(){
      const descInputs = document.querySelectorAll('.desc-input');
      const filled = Array.from(descInputs).map(i=>i.value.trim()).filter(Boolean);

      if (filled.length < 2){
        const fb = document.getElementById('norm-feedback');
        fb.className = 'feedback error show';
        fb.innerHTML = `<div class="feedback-title">Atenci√≥n</div>
                        <div class="feedback-text">Completa al menos <strong>2 descriptores oficiales</strong> para continuar.</div>`;
        return;
      }

      // Guardar descriptores y sin√≥nimos
      savedDescriptors = [];
      savedSynonyms = [];
      
      normKeywords.forEach(row => {
        if (row.desc && row.desc.trim()) {
          savedDescriptors.push(row.desc.trim());
          if (row.syn && row.syn.trim()) {
            savedSynonyms.push(row.syn.trim());
          } else {
            savedSynonyms.push('');
          }
        }
      });

      clearFeedback('norm-feedback');
      nextSlide();
    }

    // ===== Slide 6 (con distractores) =====
    let selectedTerms = new Set();
    const correctTerms = new Set(['ruptura', 'tendinopatia', 'carrera', 'atletas']);
    
    function toggleCheckbox(el, value){
      el.classList.toggle('selected');
      if (el.classList.contains('selected')) selectedTerms.add(value);
      else selectedTerms.delete(value);
      clearFeedback('feedback5');
    }

    function checkRelated(){
      if (selectedTerms.size === 0){
        showFeedback('feedback5','error','Selecciona al menos uno','Marca los t√©rminos que S√ç son relevantes para este tema espec√≠fico.');
        return;
      }

      // Verificar cu√°ntos correctos e incorrectos
      const correctSelected = [...selectedTerms].filter(t => correctTerms.has(t));
      const incorrectSelected = [...selectedTerms].filter(t => !correctTerms.has(t));

      if (incorrectSelected.length > 0) {
        showFeedback('feedback5','error','Revisa tu selecci√≥n',`Has seleccionado t√©rminos que NO son relevantes para lesiones de tend√≥n en corredores. Piensa: ¬ø${incorrectSelected[0]} est√° relacionado directamente con el tema?`);
        return;
      }

      if (correctSelected.length === 4){
        showFeedback('feedback5','success','¬°Perfecto!','Has identificado correctamente todos los t√©rminos relevantes: tipo de lesi√≥n (ruptura, tendinopat√≠a) + contexto (atletas, carrera).');
        setTimeout(()=>nextSlide(), 900);
      } else if (correctSelected.length >= 2){
        showFeedback('feedback5','partial','Bien, pero incompleto',`Faltan ${4-correctSelected.length} t√©rminos relevantes. Necesitas tanto t√©rminos de lesi√≥n como de contexto poblacional.`);
      } else {
        showFeedback('feedback5','error','Muy pocos t√©rminos','Necesitas seleccionar m√°s t√©rminos relevantes (al menos 2 de lesi√≥n + 2 de contexto).');
      }
    }

    // ===== Ecuaci√≥n booleana (con OR para sin√≥nimos) =====
    function buildEquation(){
      if (!savedDescriptors || savedDescriptors.length === 0) return '';
      
      const parts = savedDescriptors.map((desc, idx) => {
        const syn = savedSynonyms[idx];
        if (syn && syn.trim()) {
          const synList = syn.split(',').map(s => `"${s.trim()}"`).join(' OR ');
          return `("${desc}" OR ${synList})`;
        } else {
          return `"${desc}"`;
        }
      });
      
      return parts.join(' AND ');
    }

    function refreshEquationViews(){
      const eq = buildEquation();
      const preview = document.getElementById('equationPreview');
      const final = document.getElementById('equationFinal');

      if (preview) preview.textContent = eq ? eq : '(Completa la normalizaci√≥n primero)';
      if (final) final.textContent = eq ? eq : '(No se gener√≥ ecuaci√≥n)';
    }

    function copyEquation(){
      const eq = buildEquation();
      if (!eq){
        showFeedback('feedback6','error','No hay ecuaci√≥n','Primero completa al menos 2 descriptores en la normalizaci√≥n.');
        return;
      }

      navigator.clipboard?.writeText(eq).then(()=>{
        showFeedback('feedback6','success','‚úì Copiado','Ecuaci√≥n copiada al portapapeles.');
      }).catch(()=>{
        const tmp = document.createElement('textarea');
        tmp.value = eq;
        document.body.appendChild(tmp);
        tmp.select();
        document.execCommand('copy');
        document.body.removeChild(tmp);
        showFeedback('feedback6','success','‚úì Copiado','Ecuaci√≥n copiada al portapapeles.');
      });
    }

    // ===== Reset =====
    function resetAll(){
      if (!confirm('¬øEst√°s seguro de que quieres reiniciar? Se perder√°n todos los datos ingresados.')) return;
      
      selectedOption = null;
      selectedTerms.clear();
      savedDescriptors = [];
      savedSynonyms = [];
      normKeywords = defaultKeywords.map(k => ({...k}));

      document.querySelectorAll('.option-card, .checkbox-card').forEach(c=>c.classList.remove('selected'));
      document.querySelectorAll('.feedback').forEach(f=>{ f.className='feedback'; f.innerHTML=''; });

      const th = document.getElementById('thesaurus');
      if (th) th.value = '';
      const btn = document.getElementById('open-thesaurus-btn');
      if (btn) btn.disabled = true;

      renderNormTable();
      refreshEquationViews();
      
      document.getElementById('presentationWrapper').classList.remove('active');
      document.getElementById('registroScreen').style.display = 'flex';
      
      document.getElementById('nombreCompleto').value = '';
      document.getElementById('nrc').value = '';
      document.getElementById('grupo').value = '';
      
      studentData = { nombre: '', nrc: '', grupo: '' };
      
      showSlide(0);
    }

    // init
    renderNormTable();
  </script>
</body>
</html>
