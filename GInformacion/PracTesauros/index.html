<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Tras las huellas de la Verdad</title>
<style>
  :root{
    --bg:#f9faff; --ink:#1a1f36; --muted:#56607a;
    --edge:#d7deea; --panel:#fff; --accent:#5b6ef5; --accent2:#7a5cff;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink);display:flex;flex-direction:column;min-height:100vh}
  header{padding:16px;background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;text-align:center;font-size:1.6rem;font-weight:800}
  footer{padding:10px;text-align:center;font-size:.9rem;color:var(--muted);border-top:1px solid var(--edge);margin-top:auto}
  main{flex:1;display:flex;align-items:center;justify-content:center;padding:18px}

  .slide{display:none;max-width:1020px;background:var(--panel);padding:24px;border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,.08);width:100%;min-height:560px;flex-direction:column;justify-content:space-between}
  .slide.active{display:flex}

  h2{margin:6px 0 10px;color:#5b4bf0}
  .progress{text-align:right;font-size:.9rem;color:var(--muted);margin-bottom:8px}
  .nav{margin-top:20px;display:flex;justify-content:space-between;width:100%}
  .btn{background:#eef1ff;border:1px solid var(--edge);padding:10px 14px;border-radius:10px;cursor:pointer}
  .btn:hover{border-color:var(--accent)}
  .btn.accent{background:linear-gradient(135deg,var(--accent),var(--accent2));border:0;color:#fff;font-weight:700}
  .btn.ghost{background:#fff}
  textarea,select,input{width:100%;padding:10px;border:1px solid var(--edge);border-radius:10px;background:#fbfdff}

  .hint{font-size:.92rem;color:var(--muted)}
  .error{color:#fff;background:#e11d48;padding:8px 12px;border-radius:10px;display:none}
  .ok{color:#0a4;display:none}

  /* chips */
  .pillwrap{display:flex;flex-wrap:wrap;gap:8px}
  .pill{display:inline-flex;align-items:center;gap:8px;background:#f3f6fb;border:1px solid var(--edge);border-radius:999px;padding:8px 12px;height:40px;white-space:nowrap;cursor:pointer}
  .pill input{margin-right:6px}
  .chip-ok{background:#e6f7ec!important;box-shadow:inset 0 0 0 2px #86d39c}
  .chip-bad{background:#ffe8e8!important;box-shadow:inset 0 0 0 2px #f3a4a4}
  .chip-miss{box-shadow:0 0 0 2px #f6c36b!important}

  table{width:100%;border-collapse:collapse;margin-top:10px}
  th,td{border:1px solid var(--edge);padding:8px;vertical-align:top}
  th{background:#f0f4fb;text-align:left}
  td input, td textarea{width:100%}
  .linkbar{display:flex;flex-wrap:wrap;gap:10px}
  .linkbar a{display:inline-block;border:1px solid var(--edge);background:#ffffff;padding:8px 12px;border-radius:10px;text-decoration:none;color:var(--ink)}
  .linkbar a:hover{border-color:var(--accent)}
</style>
</head>
<body>
<header>Tras las huellas de la Verdad</header>
<main>

  <!-- 1: Noticia -->
  <section class="slide active" id="s1">
    <div class="progress">1 / 7</div>
    <div>
      <h2>La Noticia</h2>
      <p><strong>Para investigar:</strong> ‚ÄúInvestigadores del Instituto Karolinska reportaron que un f√°rmaco experimental logra <em>alargar los tel√≥meros en c√©lulas humanas in vitro</em>, lo que podr√≠a retrasar el envejecimiento celular y abrir la puerta a <em>terapias regenerativas</em>‚Äù.</p>
      <div class="hint"><strong>Objetivo:</strong> decidir si la noticia es verdadera, exagerada, falsa o incierta usando fuentes acad√©micas.</div>
    </div>
    <div class="nav"><span></span><button class="btn accent" onclick="goFrom1()">Siguiente</button></div>
  </section>

  <!-- 2: Palabras clave -->
  <section class="slide" id="s2">
    <div class="progress">2 / 7</div>
    <div>
      <h2>Detecta palabras clave</h2>
      <p class="hint">Selecciona los <strong>conceptos n√∫cleo</strong>. Evita lugares/adjetivos. Pulsa <em>Verificar</em> y luego <em>Siguiente</em>.</p>

      <div class="pillwrap" id="kw-options">
        <label class="pill" id="chip_0"><input type="checkbox" id="kw_0"> tel√≥meros</label>
        <label class="pill" id="chip_1"><input type="checkbox" id="kw_1"> envejecimiento celular</label>
        <label class="pill" id="chip_2"><input type="checkbox" id="kw_2"> terapias regenerativas</label>
        <label class="pill" id="chip_3"><input type="checkbox" id="kw_3"> in vitro</label>
        <label class="pill" id="chip_4"><input type="checkbox" id="kw_4"> f√°rmaco experimental</label>
        <label class="pill" id="chip_5"><input type="checkbox" id="kw_5"> Instituto Karolinska</label>
        <label class="pill" id="chip_6"><input type="checkbox" id="kw_6"> Suecia</label>
        <label class="pill" id="chip_7"><input type="checkbox" id="kw_7"> grupo de investigadores</label>
        <label class="pill" id="chip_8"><input type="checkbox" id="kw_8"> nuevo</label>
      </div>

      <div style="display:flex;gap:10px;align-items:center;margin-top:8px">
        <button class="btn" id="verifyKW">Verificar selecci√≥n</button>
        <span id="kw-feedback" class="hint"></span>
      </div>

      <div id="err2" class="error">Selecciona al menos 2 palabras clave v√°lidas.</div>
    </div>
    <div class="nav"><button class="btn" onclick="prevSlide()">Anterior</button><button class="btn accent" onclick="goFrom2()">Siguiente</button></div>
  </section>

  <!-- 3: Tesauros (tabla mejorada) -->
  <section class="slide" id="s3">
    <div class="progress">3 / 7</div>
    <div>
      <h2>Normaliza en tesauros</h2>
      <p class="hint">
        <strong>Descriptor</strong> = nombre oficial del concepto en un tesauro (lenguaje controlado).<br>
        <strong>C√≥mo hacerlo:</strong><br>
        1) Traduce tu palabra clave al <em>ingl√©s</em> (usa el bot√≥n de traductor si lo necesitas).<br>
        2) Abre el tesauro.<br>
        3) En la pesta√±a <em><u>Details</u></em> del resultado, copia el campo <strong>MeSH Heading</strong> ‚Üí ese es el descriptor oficial.<br>
        4) (Opcional) Revisa los <em>Entry Terms</em> para sin√≥nimos.
      </p>

      <label class="hint" for="th">Elige tesauro</label>
      <select id="th">
        <option value="">Selecciona‚Ä¶</option>
        <option value="MeSH">MeSH ‚Äì Salud/Biomedicina (recomendado para este caso)</option>
        <option value="DeCS">DeCS ‚Äì Salud (LatAm)</option>
        <option value="ERIC">ERIC ‚Äì Educaci√≥n</option>
        <option value="UNESCO">UNESCO ‚Äì Cs. Sociales</option>
        <option value="INSPEC">INSPEC ‚Äì Ingenier√≠a/TI</option>
        <option value="AGROVOC">AGROVOC ‚Äì Agricultura/Ambiente</option>
      </select>

      <div class="linkbar" style="margin:8px 0">
        <a id="th-link" href="#" target="_blank" style="display:none">Abrir tesauro</a>
        <a class="btn ghost" href="https://translate.google.com/?sl=es&tl=en" target="_blank">Abrir traductor</a>
      </div>

      <table id="tmap">
        <thead>
          <tr>
            <th style="width:33%">Palabra clave (ES)</th>
            <th style="width:33%">Traducci√≥n al ingl√©s (escribe t√∫)</th>
            <th style="width:34%">Descriptor oficial (MeSH Heading)</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <div id="err3" class="error">Completa al menos 2 <strong>descriptores oficiales</strong> para continuar.</div>
      <div class="hint" style="margin-top:6px">üîë Recuerda: el <strong>MeSH Heading</strong> aparece en la pesta√±a <em>Details</em> del resultado.</div>
    </div>
    <div class="nav"><button class="btn" onclick="prevSlide()">Anterior</button><button class="btn accent" onclick="goFrom3()">Siguiente</button></div>
  </section>

  <!-- 4: Booleanos -->
  <section class="slide" id="s4">
    <div class="progress">4 / 7</div>
    <div>
      <h2>Construye tu estrategia booleana</h2>
      <p class="hint">Recuerda: <code>AND</code> une conceptos, <code>OR</code> agrega sin√≥nimos, <code>"comillas"</code> = frase exacta, <code>*</code> trunca.</p>
      <label class="hint">Descriptores que usar√°s</label>
      <textarea id="descView" readonly></textarea>

      <label class="hint" style="margin-top:8px">Ecuaci√≥n (puedes editarla)</label>
      <textarea id="query"></textarea>

      <div id="err4" class="error">La ecuaci√≥n debe tener al menos dos t√©rminos entre comillas unidos por AND.</div>
      <div id="ok4" class="ok">OK. Usa esta ecuaci√≥n en la siguiente diapositiva.</div>
    </div>
    <div class="nav"><button class="btn" onclick="prevSlide()">Anterior</button><button class="btn accent" onclick="goFrom4()">Siguiente</button></div>
  </section>

  <!-- 5: Bases -->
  <section class="slide" id="s5">
    <div class="progress">5 / 7</div>
    <div>
      <h2>Busca en bases acad√©micas</h2>
      <p class="hint">Copia tu ecuaci√≥n y p√©gala en una base. Aplica filtros (a√±os recientes, tipo de estudio, humanos, idioma).</p>
      <label class="hint">Tu ecuaci√≥n</label>
      <textarea id="queryView" readonly></textarea>
      <div class="linkbar" style="margin:10px 0">
        <a href="https://pubmed.ncbi.nlm.nih.gov/" target="_blank">PubMed</a>
        <a href="https://www.scopus.com/" target="_blank">Scopus</a>
        <a href="https://www.webofscience.com/" target="_blank">Web of Science</a>
        <a href="https://scielo.org/" target="_blank">Scielo</a>
        <a href="https://scholar.google.com/" target="_blank">Google Scholar</a>
      </div>
      <label class="hint">Anota 1‚Äì2 art√≠culos (t√≠tulo + DOI/URL)</label>
      <textarea id="found" placeholder="Ej.: Title (2023) ‚Äî https://doi.org/..."></textarea>
      <div id="err5" class="error">Registra al menos 1 art√≠culo con enlace.</div>
    </div>
    <div class="nav"><button class="btn" onclick="prevSlide()">Anterior</button><button class="btn accent" onclick="goFrom5()">Siguiente</button></div>
  </section>

  <!-- 6: Evaluaci√≥n -->
  <section class="slide" id="s6">
    <div class="progress">6 / 7</div>
    <div>
      <h2>Eval√∫a la evidencia</h2>
      <p class="hint">Marca si el art√≠culo principal cumple cada criterio.</p>
      <table>
        <tr><th>Criterio</th><th>¬øCumple?</th><th>Notas</th></tr>
        <tr><td>Autoridad (autor/instituci√≥n)</td><td><input type="checkbox" class="ck"></td><td><input></td></tr>
        <tr><td>A√±o (vigente para el tema)</td><td><input type="checkbox" class="ck"></td><td><input></td></tr>
        <tr><td>Indexaci√≥n (revista reconocida)</td><td><input type="checkbox" class="ck"></td><td><input></td></tr>
        <tr><td>Metodolog√≠a (in vitro/ensayo cl√≠nico)</td><td><input type="checkbox" class="ck"></td><td><input></td></tr>
        <tr><td>Relevancia con la noticia</td><td><input type="checkbox" class="ck"></td><td><input></td></tr>
      </table>
      <div class="hint" id="score">Puntaje: 0 / 5</div>
      <div id="err6" class="error">Marca al menos 3 criterios para continuar.</div>
    </div>
    <div class="nav"><button class="btn" onclick="prevSlide()">Anterior</button><button class="btn accent" onclick="goFrom6()">Siguiente</button></div>
  </section>

  <!-- 7: Veredicto -->
  <section class="slide" id="s7">
    <div class="progress">7 / 7</div>
    <div>
      <h2>Conclusi√≥n</h2>
      <p>Con lo encontrado, la noticia es:</p>
      <select id="verdict">
        <option value="">Selecciona‚Ä¶</option>
        <option>Respaldada por evidencia</option>
        <option>Exagerada</option>
        <option>Falsa / No respaldada</option>
        <option>Incierta</option>
      </select>
      <label class="hint" for="justify" style="margin-top:8px">Justifica la decisi√≥n (menciona 1‚Äì2 art√≠culos)</label>
      <textarea id="justify"></textarea>
      <div id="err7" class="error">Selecciona un veredicto y escribe una justificaci√≥n.</div>
    </div>
    <div class="nav"><button class="btn" onclick="prevSlide()">Anterior</button><span></span></div>
  </section>

</main>
<footer>Aprendiendo con LaProfeVivy</footer>

<script>
let current=0;
function showSlide(n){
  const slides=document.querySelectorAll('.slide');
  if(n<0||n>=slides.length) return;
  slides[current].classList.remove('active');
  current=n; slides[current].classList.add('active');
}
function nextSlide(){showSlide(current+1)}
function prevSlide(){showSlide(current-1)}

/* 1‚Üí2 */
function goFrom1(){ nextSlide(); }

/* ===== Palabras clave (slide 2) ===== */
const KW_OPTIONS=[
  {t:'tel√≥meros',ok:true},
  {t:'envejecimiento celular',ok:true},
  {t:'terapias regenerativas',ok:true},
  {t:'in vitro',ok:true},
  {t:'f√°rmaco experimental',ok:true},
  {t:'Instituto Karolinska',ok:false},
  {t:'Suecia',ok:false},
  {t:'grupo de investigadores',ok:false},
  {t:'nuevo',ok:false}
];
function paintKW(){
  let correct=0,wrong=0,missed=0;
  KW_OPTIONS.forEach((o,i)=>{
    const cb=document.getElementById('kw_'+i);
    const chip=document.getElementById('chip_'+i);
    chip.classList.remove('chip-ok','chip-bad','chip-miss');
    if(cb.checked&&o.ok){chip.classList.add('chip-ok');correct++;}
    if(cb.checked&&!o.ok){chip.classList.add('chip-bad');wrong++;}
    if(!cb.checked&&o.ok){chip.classList.add('chip-miss');missed++;}
  });
  document.getElementById('kw-feedback').textContent =
    `‚úî Correctas: ${correct} ¬∑ ‚úñ Incorrectas: ${wrong} ¬∑ Faltaron: ${missed}`;
  return correct;
}
document.getElementById('verifyKW').addEventListener('click', paintKW);

function goFrom2(){
  const correct=paintKW();
  const sel=KW_OPTIONS.filter((o,i)=>document.getElementById('kw_'+i).checked && o.ok).map(o=>o.t);
  const err=document.getElementById('err2');
  if(correct<2){ err.style.display='block'; return; }
  err.style.display='none';
  // Construir tabla del slide 3
  buildTableFromKeywords(sel);
  nextSlide();
}

/* ===== Tesauros (slide 3) ===== */
const THESAURI={
  MeSH:"https://meshb.nlm.nih.gov/",
  DeCS:"https://decs.bvsalud.org/",
  ERIC:"https://eric.ed.gov/?ti=all&thesaurus",
  UNESCO:"https://vocabularies.unesco.org/browser/thesaurus/es/",
  INSPEC:"https://iopscience.iop.org/",
  AGROVOC:"https://agrovoc.fao.org"
};
document.getElementById('th').addEventListener('change',e=>{
  const url=THESAURI[e.target.value];
  const link=document.getElementById('th-link');
  if(url){link.style.display='inline-block'; link.href=url;}else{link.style.display='none';}
});

function buildTableFromKeywords(spanishList){
  const tbody=document.querySelector('#tmap tbody');
  tbody.innerHTML='';
  spanishList.forEach(sp=>{
    const tr=document.createElement('tr');
    const td1=document.createElement('td');
    const td2=document.createElement('td');
    const td3=document.createElement('td');
    td1.textContent=sp; // Palabra clave (ES)
    td2.innerHTML=`<input type="text" placeholder="Traducci√≥n en ingl√©s (tu mejor intento)">`;
    td3.innerHTML=`<input type="text" placeholder="MeSH Heading (en pesta√±a Details)">`;
    tr.appendChild(td1); tr.appendChild(td2); tr.appendChild(td3);
    tbody.appendChild(tr);
  });
}

function goFrom3(){
  // tomar descriptores de la 3¬™ columna
  const desc=[...document.querySelectorAll('#tmap tbody tr td:nth-child(3) input')]
    .map(i=>i.value.trim()).filter(Boolean);
  const err=document.getElementById('err3');
  if(desc.length<2){ err.style.display='block'; return; }
  err.style.display='none';
  // pasar a 4
  document.getElementById('descView').value = desc.join('; ');
  document.getElementById('query').value = desc.map(t=>`("${t}")`).join(' AND ');
  nextSlide();
}

/* ===== Booleanos (slide 4) ===== */
function goFrom4(){
  const q=(document.getElementById('query').value||'').trim();
  const err=document.getElementById('err4'); const ok=document.getElementById('ok4');
  const hasAND=/\band\b/i.test(q);
  const quoted=(q.match(/"/g)||[]).length>=4;
  if(!q || !(hasAND && quoted)){ err.style.display='block'; ok.style.display='none'; return; }
  err.style.display='none'; ok.style.display='block';
  document.getElementById('queryView').value=q;
  nextSlide();
}

/* ===== Bases (slide 5) ===== */
function goFrom5(){
  const val=(document.getElementById('found').value||'').trim();
  const err=document.getElementById('err5');
  if(!/https?:\/\//i.test(val)){ err.style.display='block'; return; }
  err.style.display='none';
  nextSlide();
}

/* ===== Evaluaci√≥n (slide 6) ===== */
function scoreNow(){
  const total=document.querySelectorAll('#s6 .ck').length;
  const yes=[...document.querySelectorAll('#s6 .ck')].filter(x=>x.checked).length;
  document.getElementById('score').textContent=`Puntaje: ${yes} / ${total}`;
  return yes;
}
document.querySelectorAll('#s6 .ck').forEach(el=>el.addEventListener('change',scoreNow));
function goFrom6(){
  const yes=scoreNow(); const err=document.getElementById('err6');
  if(yes<3){ err.style.display='block'; return; }
  err.style.display='none'; nextSlide();
}

/* ===== Veredicto (slide 7) ===== */
document.getElementById('justify').addEventListener('input',()=>{document.getElementById('err7').style.display='none';});
document.getElementById('verdict').addEventListener('change',()=>{document.getElementById('err7').style.display='none';});
</script>
</body>
</html>

