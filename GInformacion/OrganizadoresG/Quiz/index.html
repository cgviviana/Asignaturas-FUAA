<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Test · LaProfeVivy</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b1020; --bg2:#0f172a; --panel:#101a2d; --card:#16233f;
    --ink:#e5f6ff; --accent:#00eaff; --accent-dim:#0ab3c2;
    --ok:#47e389; --bad:#ff6b6b; --muted:#8aa6b2;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink);
    background: radial-gradient(1100px 560px at 15% 10%, #0e1a2f 0%, var(--bg) 45%, var(--bg2) 100%);
    font-family:Poppins,system-ui,Segoe UI,Arial,sans-serif; display:flex; flex-direction:column;
  }
  header{
    padding:18px 20px; text-align:center; border-bottom:1px solid rgba(0,234,255,.18);
    background:rgba(255,255,255,.02)
  }
  h1{font-family:Orbitron, Poppins, sans-serif; color:var(--accent); margin:0}
  .wrap{flex:1; display:flex; flex-direction:column; align-items:center; padding:18px}
  .page{width:clamp(320px, 88vw, 980px); display:none}
  .page.active{display:block}
  .card{
    background:linear-gradient(180deg, rgba(4,18,30,.55), rgba(8,20,34,.35));
    border:1px solid rgba(0,234,255,.2); border-radius:16px; padding:18px 18px; margin:14px 0;
    box-shadow:0 0 0 1px rgba(0,234,255,.06), 0 10px 32px rgba(0,0,0,.35), inset 0 0 30px rgba(0,234,255,.04);
  }
  .row{display:flex; gap:12px; align-items:center; justify-content:space-between}
  .q-label{flex:1}
  select, input[type=text]{
    background:#0f1527; color:var(--ink); border:1px solid #223257; border-radius:10px; padding:10px 12px; min-width:220px;
    outline:none;
  }
  .check{width:22px; height:22px; border-radius:50%; border:2px solid #27425f; display:flex; align-items:center; justify-content:center; font-weight:700}
  .check.ok{border-color:var(--ok); color:var(--ok)}
  .check.bad{border-color:var(--bad); color:var(--bad)}
  .btns{display:flex; gap:10px; justify-content:center; margin:18px 0}
  button{
    background:var(--accent); color:#05212b; border:0; padding:10px 16px; border-radius:10px; font-weight:700; cursor:pointer;
  }
  button.secondary{background:#11213b; color:var(--ink); border:1px solid rgba(0,234,255,.25)}
  button:hover{filter:brightness(1.1)}
  .hint{color:var(--muted); font-size:14px; margin-top:6px}

  /* Drag & Drop */
  .dd-wrap{display:grid; grid-template-columns:1fr 1fr; gap:14px}
  .drop{min-height:54px; border:1px dashed var(--accent-dim); border-radius:10px; padding:10px; background:#0f1527}
  .drag{background:#142544; border:1px solid #2a436a; border-radius:10px; padding:8px 10px; cursor:grab; margin:6px 0}
  .pair{display:flex; gap:12px; align-items:center}
  .col{background:transparent}

  /* Opción múltiple A-D */
  .mc-card .opt{display:block; padding:10px 12px; background:#101a2d; border:1px solid #223257; border-radius:10px; margin-top:8px}
  .mc-card input{margin-right:8px}

  /* Progreso */
  .progress{width:clamp(320px, 88vw, 980px); margin-top:8px}
  .bar{height:8px; background:#0d1a2f; border:1px solid #1c3855; border-radius:999px; overflow:hidden}
  .bar>span{display:block; height:100%; width:0%; background:linear-gradient(90deg, #00eaff, #0ab3c2)}
  .bar-legend{display:flex; justify-content:space-between; font-size:12px; color:var(--muted); margin-top:6px}

  footer{padding:16px; text-align:center; color:var(--accent-dim); font-family:Orbitron, Poppins, sans-serif; letter-spacing:.08em}
</style>
</head>
<body>
  <header><h1>Test · Aprendiendo con @LaProfeVivy</h1></header>
  <div class="wrap">

    <!-- Barra de progreso -->
    <div class="progress">
      <div class="bar"><span id="barfill"></span></div>
      <div class="bar-legend"><span id="legendL">Inicio</span><span id="legendR">0%</span></div>
    </div>

    <!-- Página 0: Nombre -->
    <section class="page active" id="p0">
      <div class="card">
        <h2>Antes de comenzar</h2>
        <p>Escribe tu <b>nombre completo</b> y presiona “Empezar”.</p>
        <input type="text" id="nombre" placeholder="Nombre completo">
        <p class="hint">Este nombre aparecerá en el reporte final.</p>
      </div>
      <div class="btns">
        <button onclick="startTest()">Empezar</button>
      </div>
    </section>

    <!-- Página 1: SELECT (10, aleatorio) -->
    <section class="page" id="p1">
      <h2>Sección 1 · Relaciona definición → organizador (SELECT)</h2>
      <div id="s1"></div>
      <div class="btns">
        <button class="secondary" onclick="prevPage()">Anterior</button>
        <button onclick="gradeS1()">Calificar sección 1</button>
        <button onclick="nextPage()">Siguiente</button>
      </div>
    </section>

    <!-- Página 2: Drag & Drop (10, aleatorio) -->
    <section class="page" id="p2">
      <h2>Sección 2 · Arrastra el concepto a su definición (10)</h2>
      <div class="dd-wrap" id="s2"></div>
      <div class="card">
        <h3>Conceptos para arrastrar</h3>
        <div id="bank"></div>
        <p class="hint">Arrastra cada tarjeta hacia su definición correspondiente.</p>
      </div>
      <div class="btns">
        <button class="secondary" onclick="prevPage()">Anterior</button>
        <button onclick="gradeS2()">Calificar sección 2</button>
        <button onclick="nextPage()">Siguiente</button>
      </div>
    </section>

    <!-- Página 3: Opción múltiple A-D (10, aleatorio) -->
    <section class="page" id="p3">
      <h2>Sección 3 · Opción múltiple (A, B, C, D)</h2>
      <div id="s3"></div>
      <div class="btns">
        <button class="secondary" onclick="prevPage()">Anterior</button>
        <button onclick="gradeS3()">Calificar sección 3</button>
        <button onclick="finish()">Finalizar</button>
      </div>
    </section>

    <!-- RESULTADO -->
    <section class="page" id="pres">
      <div class="card" id="resumen"></div>
      <div class="btns">
        <button class="secondary" onclick="location.reload()">Reiniciar</button>
      </div>
    </section>

  </div>
  <footer>Aprendiendo con @LaProfeVivy</footer>

<script>
  /* ======= Utilidades ======= */
  const pages=["p0","p1","p2","p3","pres"];
  const bar = document.getElementById('barfill'),
        legendR=document.getElementById('legendR'), legendL=document.getElementById('legendL');
  let idx=0, nameUser="";
  let builtS1=false, builtS2=false, builtS3=false;
  let scoreS1=0, scoreS2=0, scoreS3=0;

  function shuffle(a){
    const arr=[...a];
    for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; }
    return arr;
  }
  function showPage(i){
    document.getElementById(pages[idx]).classList.remove('active');
    idx=i;
    document.getElementById(pages[idx]).classList.add('active');
    const percent = Math.round((idx/(pages.length-1))*100);
    bar.style.width = percent + "%";
    legendR.textContent = percent + "%";
    legendL.textContent = ["Inicio","Sección 1","Sección 2","Sección 3","Resultado"][idx];

    // Al entrar por primera vez a cada sección, construir con orden aleatorio
    if(idx===1 && !builtS1) { buildS1(); builtS1=true; }
    if(idx===2 && !builtS2) { buildS2(); builtS2=true; }
    if(idx===3 && !builtS3) { buildS3(); builtS3=true; }
  }
  function nextPage(){ if(idx < pages.length-2) showPage(idx+1); }
  function prevPage(){ if(idx > 0) showPage(idx-1); }

  function startTest(){
    const n = document.getElementById('nombre').value.trim();
    nameUser = n || "Anónimo";
    // reset estado por si reinician sin recargar
    builtS1=builtS2=builtS3=false; scoreS1=scoreS2=scoreS3=0;
    showPage(1);
  }

  /* ======= Datos de preguntas ======= */
  // S1: definiciones → concepto correcto (select)
  const S1_ITEMS = [
    {def:"Estructura radial que parte de una idea central.", ans:"Mapa mental"},
    {def:"Red de conceptos jerárquicos unidos con palabras-enlace.", ans:"Mapa conceptual"},
    {def:"Tabla que muestra semejanzas y diferencias.", ans:"Cuadro comparativo"},
    {def:"Círculos superpuestos que muestran intersecciones.", ans:"Diagrama de Venn"},
    {def:"Secuencia cronológica de eventos.", ans:"Línea de tiempo"},
    {def:"Panel visual de KPI para monitoreo.", ans:"Dashboards"},
    {def:"Barras, líneas o dispersión para datos numéricos.", ans:"Gráficas estadísticas"},
    {def:"Representa la estructura jerárquica de roles.", ans:"Organigrama"},
    {def:"Esquema jerárquico con llaves que agrupan conceptos.", ans:"Cuadro sinóptico"},
    {def:"Síntesis visual: datos + texto + gráficos con narrativa.", ans:"Infografía"}
  ];
  const S1_ALL_OPTIONS = S1_ITEMS.map(x=>x.ans);

  // S2: definición → drop con concepto correcto (drag bank: 10 conceptos)
  const S2_ITEMS = [
    {def:"Ordenar y jerarquizar datos para dar coherencia.", ans:"Organización de la información"},
    {def:"Mostrar visualmente información ya estructurada.", ans:"Representación de la información"},
    {def:"Dato + contexto + interpretación.", ans:"Información"},
    {def:"Red jerárquica de conceptos con palabras-enlace.", ans:"Mapa conceptual"},
    {def:"Estructura radial desde una idea central.", ans:"Mapa mental"},
    {def:"Tabla que compara opciones por criterios.", ans:"Cuadro comparativo"},
    {def:"Cronología de hitos y duración.", ans:"Línea de tiempo"},
    {def:"Panel de indicadores clave de desempeño.", ans:"Dashboards"},
    {def:"Estructura formal de roles y niveles.", ans:"Organigrama"},
    {def:"Síntesis visual con datos, texto e imágenes.", ans:"Infografía"}
  ];
  const S2_BANK = S2_ITEMS.map(x=>x.ans);

  // S3: opción múltiple; cada item tiene opciones y una correcta
  const S3_ITEMS = [
    {q:"La información se convierte en conocimiento cuando…",
      opts:["se representa gráficamente","se integra con la experiencia","se recopila de internet","se imprime"],
      correct:"se integra con la experiencia"},
    {q:"Principio clave de una buena representación gráfica:",
      opts:["correspondencia entre gráfico y dato","usar 3D para lucir mejor","tantos colores como sea posible","eliminar etiquetas"],
      correct:"correspondencia entre gráfico y dato"},
    {q:"El cuadro sinóptico se caracteriza por…",
      opts:["porcentajes y proporciones","cronologías","llaves jerárquicas que agrupan","series temporales"],
      correct:"llaves jerárquicas que agrupan"},
    {q:"¿Cuál NO es una herramienta de organización?",
      opts:["mapa conceptual","cuadro sinóptico","cuadro comparativo","gráfico de pastel"],
      correct:"gráfico de pastel"},
    {q:"El organizador gráfico es “híbrido” porque…",
      opts:["sirve para organizar y para representar","mezcla audio y video","solo organiza","solo representa"],
      correct:"sirve para organizar y para representar"},
    {q:"Para comparar 4 alternativas por 5 criterios conviene usar…",
      opts:["mapa mental","cuadro comparativo","línea de tiempo","infografía"],
      correct:"cuadro comparativo"},
    {q:"Para mostrar la ruta crítica en un proyecto se usa…",
      opts:["mapa conceptual","organigrama","dashboard","diagrama de Gantt"],
      correct:"diagrama de Gantt"},
    {q:"En representación, lo más crítico es…",
      opts:["usar 3D y sombras","agregar mucho texto","claridad y precisión visual","eliminar unidades"],
      correct:"claridad y precisión visual"},
    {q:"Si quiero ver relaciones parte–todo y enlaces semánticos uso…",
      opts:["cuadro sinóptico","mapa conceptual","organigrama","línea de tiempo"],
      correct:"mapa conceptual"},
    {q:"La representación correcta se decide principalmente por…",
      opts:["la tarea analítica (comparar, seguir, relacionar)","el color institucional","la moda de diseño","la cantidad de emojis"],
      correct:"la tarea analítica (comparar, seguir, relacionar)"}
  ];

  /* ======= Construcción dinámica con aleatoriedad ======= */
  function buildS1(){
    const cont = document.getElementById('s1');
    cont.innerHTML = '';
    const items = shuffle(S1_ITEMS);
    items.forEach((it, idx)=>{
      const card = document.createElement('div');
      card.className='card row';
      card.dataset.answer = it.ans;

      const label = document.createElement('div');
      label.className='q-label';
      label.innerHTML = `${idx+1}) ${it.def}`;

      const sel = document.createElement('select');
      sel.innerHTML = `<option value="">-- Selecciona --</option>`;
      shuffle(S1_ALL_OPTIONS).forEach(o=>{
        const opt=document.createElement('option'); opt.value=o; opt.textContent=o; sel.appendChild(opt);
      });

      const chk = document.createElement('div'); chk.className='check';

      card.appendChild(label); card.appendChild(sel); card.appendChild(chk);
      cont.appendChild(card);
    });
  }

  function buildS2(){
    const s2 = document.getElementById('s2'); s2.innerHTML='';
    const bank = document.getElementById('bank'); bank.innerHTML='';

    // Definiciones en orden aleatorio, partidas en 2 columnas
    const defs = shuffle(S2_ITEMS);
    const left = document.createElement('div'); left.className='col';
    const right = document.createElement('div'); right.className='col';
    defs.forEach((it, i)=>{
      const col = (i%2===0)? left : right;
      const card = document.createElement('div'); card.className='card';
      card.innerHTML = `<div class="pair"><div class="q-label">${String.fromCharCode(65+i)}) ${it.def}</div><div class="check"></div></div>`;
      const drop = document.createElement('div'); drop.className='drop'; drop.dataset.answer = it.ans;
      drop.addEventListener('dragover', e=>e.preventDefault());
      drop.addEventListener('drop', e=>{
        e.preventDefault();
        const txt = e.dataTransfer.getData('text/plain');
        drop.textContent = txt;
        drop.dataset.choice = txt;
      });
      card.appendChild(drop); col.appendChild(card);
    });
    s2.appendChild(left); s2.appendChild(right);

    // Banco de conceptos aleatorio
    shuffle(S2_BANK).forEach(txt=>{
      const d=document.createElement('div'); d.className='drag'; d.draggable=true; d.textContent=txt;
      d.addEventListener('dragstart', e=>{ e.dataTransfer.setData('text/plain', txt); });
      bank.appendChild(d);
    });
  }

  function buildS3(){
    const cont = document.getElementById('s3'); cont.innerHTML='';
    const letters = ['A','B','C','D'];
    const items = shuffle(S3_ITEMS);
    items.forEach((it, i)=>{
      const card = document.createElement('div'); card.className='card mc-card';
      const q = document.createElement('p'); q.innerHTML = `${i+1}) ${it.q}`;
      card.appendChild(q);

      // Mezclar opciones y determinar cuál letra queda como correcta
      const opts = shuffle(it.opts.map(t=>({text:t, correct:(t===it.correct)})));
      let correctLetter = '';
      opts.forEach((o, j)=>{
        const label = document.createElement('label'); label.className='opt';
        const input = document.createElement('input'); input.type='radio'; input.name=`m${i+1}`; input.value=letters[j];
        label.appendChild(input);
        label.append(`${letters[j]}) ${o.text}`);
        card.appendChild(label);
        if(o.correct) correctLetter = letters[j];
      });

      const chk=document.createElement('div'); chk.className='check';
      card.appendChild(chk);
      card.dataset.answer = correctLetter;
      cont.appendChild(card);
    });
  }

  /* ======= Calificadores ======= */
  function gradeS1(){
    scoreS1=0;
    document.querySelectorAll('#s1 .card').forEach(card=>{
      const correct = card.dataset.answer;
      const sel = card.querySelector('select');
      const chk = card.querySelector('.check');
      if(sel.value === correct){ scoreS1++; chk.className = 'check ok'; chk.textContent='✓'; }
      else { chk.className='check bad'; chk.textContent='✗'; }
    });
    alert(`Sección 1: ${scoreS1}/10 correctas`);
  }

  function gradeS2(){
    scoreS2=0;
    document.querySelectorAll('#s2 .card').forEach(card=>{
      const drop = card.querySelector('.drop');
      const chk = card.querySelector('.check');
      const ok = (drop.dataset.choice || '') === drop.dataset.answer;
      if(ok){ scoreS2++; chk.className='check ok'; chk.textContent='✓'; }
      else { chk.className='check bad'; chk.textContent='✗'; }
    });
    alert(`Sección 2: ${scoreS2}/10 correctas`);
  }

  function gradeS3(){
    scoreS3=0;
    document.querySelectorAll('#s3 .mc-card').forEach(card=>{
      const ans = card.dataset.answer;
      const name = card.querySelector('input[type=radio]').name;
      const checked = card.querySelector(`input[name=${name}]:checked`);
      const chk = card.querySelector('.check');
      if(checked && checked.value===ans){ scoreS3++; chk.className='check ok'; chk.textContent='✓'; }
      else { chk.className='check bad'; chk.textContent='✗'; }
    });
    alert(`Sección 3: ${scoreS3}/10 correctas`);
  }

  /* ======= Final ======= */
  function finish(){
    // Calcular por si no presionaron cada calificar
    gradeS1(); gradeS2(); gradeS3();
    const correctas = scoreS1 + scoreS2 + scoreS3;   // 0..30
    const nota = (correctas/30*5).toFixed(2);
    const ahora = new Date().toLocaleString();

    const res = `
      <h2>Resultado Final</h2>
      <p><b>${nameUser}</b></p>
      <p>Sección 1: ${scoreS1}/10 · Sección 2: ${scoreS2}/10 · Sección 3: ${scoreS3}/10</p>
      <p><b>Puntaje:</b> ${nota} / 5.00</p>
      <p>Correctas totales: ${correctas} de 30</p>
      <p><small>Fecha y hora de realización: ${ahora}</small></p>
    `;
    document.getElementById('resumen').innerHTML = res;
    showPage(4);
  }
</script>
</body>
</html>
