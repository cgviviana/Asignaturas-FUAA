<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>OVA · Objetivos – Aprendiendo conLaProfeVivy</title>
<style>
  :root{
    /* Paleta "mora en leche" */
    --bg:#f9f7fb; --card:#ffffff; --txt:#2f2942; --muted:#6e667a; --bdr:#e7e3ee;
    --lav1:#f3eefc; --lav2:#efe7fb; --lav3:#f7f2ff; --cream:#fffaf3;
    --ok:#24a148; --bad:#d83a52; --accent:#7a5cc7;
  }
  html,body{background:var(--bg); color:var(--txt); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial,sans-serif; margin:0}
  .wrap{max-width:1024px; margin:28px auto; padding:0 16px}

  /* Marca */
  .brand{
    text-align:center; background:linear-gradient(90deg,var(--lav2),var(--cream));
    border:1px solid var(--bdr); border-radius:18px; padding:18px 16px;
    box-shadow:0 8px 24px rgba(20,40,80,.06); margin-bottom:14px;
    font-weight:800; letter-spacing:.2px; font-size:2.1rem;
  }
  .brand small{display:block; font-weight:500; color:var(--muted); margin-top:6px; font-size:.95rem}

  /* Tabs */
  .tabs{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px}
  .tab{border:1px solid var(--bdr); background:#fff; padding:8px 12px; border-radius:999px; cursor:pointer}
  .tab.active{background:linear-gradient(90deg,var(--lav1),var(--lav3)); font-weight:600}

  /* Cards y layout */
  .card{background:var(--card); border:1px solid var(--bdr); border-radius:16px; padding:16px; box-shadow:0 8px 24px rgba(20,40,80,.06); margin-bottom:12px}
  h2{margin:.2rem 0 0.6rem; font-size:1.15rem}
  .muted{color:var(--muted)}
  .grid{display:grid; gap:12px}
  @media(min-width:900px){ .grid-2{grid-template-columns:1fr 1fr} .grid-3{grid-template-columns:1fr 1fr 1fr} }
  label{font-size:.9rem; color:var(--muted)}
  input[type=text], textarea, select{
    width:100%; padding:10px 12px; border:1px solid var(--bdr); border-radius:10px; background:#fff; outline:none
  }
  textarea{min-height:84px; resize:vertical}
  .row{display:flex; flex-wrap:wrap; gap:8px; align-items:center}
  .badge{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border:1px solid var(--bdr);
         border-radius:999px; background:#fff; color:#4a4060; font-size:.85rem}
  .btn{border:1px solid var(--bdr); background:#fff; padding:10px 14px; border-radius:12px; cursor:pointer}
  .btn.primary{background:linear-gradient(90deg,var(--lav1),var(--lav3))}
  .btn:hover{background:#f4f3f8}
  .out{background:#fff; border:1px dashed var(--bdr); border-radius:12px; padding:12px}
  .good{color:var(--ok)} .bad{color:var(--bad)}
  .pill{padding:4px 8px; border:1px solid var(--bdr); border-radius:999px; background:#fff; font-size:.82rem}
  .small{font-size:.85rem}

  /* Lista específicos */
  .item{border:1px solid var(--bdr); border-radius:12px; padding:10px; background:#fff}
  .item + .item{margin-top:8px}
  .rm{cursor:pointer; color:#b42326}

  /* Quiz */
  .qitem{border:1px solid var(--bdr); border-radius:12px; padding:10px; background:#fff}
  .qitem + .qitem{margin-top:8px}
  .ok{border-color:rgba(36,161,72,.35); background:#f0fbf4}
  .wrong{border-color:rgba(216,58,82,.35); background:#fff2f4}
</style>
</head>
<body>
<div class="wrap">
  <div class="brand">
    Aprendiendo conLaProfeVivy
    <small>OVA · Cómo redactar objetivos (general, específicos y de solución)</small>
  </div>

  <!-- NAV -->
  <div class="tabs" id="tabs">
    <button class="tab active" data-view="v-teoria">1) Mini-teoría</button>
    <button class="tab" data-view="v-constructor">2) Constructor guiado</button>
    <button class="tab" data-view="v-ejemplos">3) Ejemplos</button>
    <button class="tab" data-view="v-checklist">4) Checklist</button>
    <button class="tab" data-view="v-quiz">5) Mini-quiz</button>
  </div>

  <!-- 1. TEORÍA -->
  <section id="v-teoria" class="card">
    <h2>Tipos de objetivos</h2>
    <div class="grid grid-3">
      <div class="card" style="background:linear-gradient(90deg,var(--lav2),var(--cream));">
        <h2>General</h2>
        <p>Finalidad amplia del proyecto. <b>1 verbo</b> fuerte + <i>para quién</i> + <i>dónde</i>.</p>
        <div class="out">Ej.: <i>Reducir</i> el tiempo de espera para <b>pacientes</b> en <b>urgencias</b>.</div>
      </div>
      <div class="card" style="background:linear-gradient(90deg,var(--lav2),var(--cream));">
        <h2>Específicos</h2>
        <p>Pasos medibles. Estructura: <b>verbo</b> + <b>qué</b> + <b>indicador/umbral</b> + <b>tiempo</b>.</p>
        <div class="out">Ej.: <i>Aplicar</i> triage con <b>≥90% acierto</b> en <b>≤60 min</b> durante <b>4 semanas</b>.</div>
      </div>
      <div class="card" style="background:linear-gradient(90deg,var(--lav2),var(--cream));">
        <h2>De solución</h2>
        <p>Diseño/implementación del <b>producto</b> (app, dispositivo o proceso) + <b>métrica</b>.</p>
        <div class="out">Ej.: <i>Implementar</i> app de turnos; espera <b>−20%</b> en <b>1 mes</b>.</div>
      </div>
    </div>

    <h2 style="margin-top:14px">Verbos sugeridos (Bloom simplificado)</h2>
    <div class="grid grid-3">
      <div>
        <b>Recordar/Comprender</b>
        <p class="muted small">definir, describir, explicar, identificar</p>
      </div>
      <div>
        <b>Aplicar/Analizar</b>
        <p class="muted small">aplicar, calcular, comparar, evaluar</p>
      </div>
      <div>
        <b>Crear/Implementar</b>
        <p class="muted small">diseñar, desarrollar, implementar, automatizar</p>
      </div>
    </div>
  </section>

  <!-- 2. CONSTRUCTOR -->
  <section id="v-constructor" class="card" style="display:none">
    <h2>Constructor guiado de objetivos</h2>
    <div class="grid grid-2">
      <div>
        <label>Actor (¿quién?)</label>
        <input id="c-actor" type="text" placeholder="p. ej., Paciente en urgencias"/>
      </div>
      <div>
        <label>Contexto (¿dónde?)</label>
        <input id="c-ctx" type="text" placeholder="p. ej., sala de triage nocturna"/>
      </div>
      <div style="grid-column:1/-1">
        <label>Problema (en negativo, claro)</label>
        <input id="c-prob" type="text" placeholder="p. ej., mucha espera y triage aplicado de forma desigual"/>
      </div>
    </div>

    <div class="grid grid-3" style="margin-top:10px">
      <!-- General -->
      <div class="card">
        <h2>Objetivo general</h2>
        <label>Verbo (1)</label>
        <select id="g-verbo">
          <option>Reducir</option><option>Mejorar</option><option>Optimizar</option>
          <option>Incrementar</option><option>Garantizar</option>
        </select>
        <label style="margin-top:6px">Resultado (¿qué?)</label>
        <input id="g-res" type="text" placeholder="tiempo de espera / seguridad / satisfacción"/>
        <div class="row" style="margin-top:8px">
          <button class="btn primary" onclick="genGeneral()">Generar</button>
          <span class="badge" id="g-check"></span>
        </div>
        <div class="out" id="g-out" style="margin-top:8px"></div>
      </div>

      <!-- Específicos -->
      <div class="card">
        <h2>Objetivos específicos</h2>
        <div class="grid">
          <div>
            <label>Verbo (1)</label>
            <select id="e-verbo">
              <option>Aplicar</option><option>Calcular</option><option>Evaluar</option>
              <option>Comparar</option><option>Registrar</option><option>Medir</option>
            </select>
          </div>
          <div>
            <label>Qué</label>
            <input id="e-que" type="text" placeholder="triage / consumo / reposición"/>
          </div>
          <div>
            <label>Indicador + umbral</label>
            <input id="e-kpi" type="text" placeholder="acierto ≥90% / ahorro ≥15%"/>
          </div>
          <div>
            <label>Tiempo</label>
            <input id="e-time" type="text" placeholder="4 semanas / 1 mes"/>
          </div>
        </div>
        <div class="row" style="margin-top:8px">
          <button class="btn" onclick="addEsp()">Añadir</button>
          <span class="badge" id="e-check"></span>
        </div>
        <div id="e-list" style="margin-top:8px"></div>
      </div>

      <!-- De solución -->
      <div class="card">
        <h2>Objetivo de solución</h2>
        <label>Tipo</label>
        <select id="s-tipo"><option>App</option><option>Dispositivo</option><option>Proceso</option></select>
        <label style="margin-top:6px">Verbo (1)</label>
        <select id="s-verbo"><option>Diseñar</option><option>Desarrollar</option><option>Implementar</option><option>Automatizar</option></select>
        <label style="margin-top:6px">Solución</label>
        <input id="s-sol" type="text" placeholder="app de turnos / luces automáticas / tablero de reposición"/>
        <label style="margin-top:6px">KPI/meta</label>
        <input id="s-kpi" type="text" placeholder="espera −20% / quiebres −30% / olvido 0%"/>
        <label style="margin-top:6px">Tiempo</label>
        <input id="s-time" type="text" placeholder="1 mes / 6 semanas"/>
        <div class="row" style="margin-top:8px">
          <button class="btn primary" onclick="genSol()">Generar</button>
          <span class="badge" id="s-check"></span>
        </div>
        <div class="out" id="s-out" style="margin-top:8px"></div>
      </div>
    </div>

    <h2 style="margin-top:10px">Salida completa</h2>
    <div class="out" id="todo-out">—</div>
    <div class="row" style="margin-top:8px">
      <button class="btn" onclick="compilar()">Compilar</button>
      <button class="btn" onclick="copiarTodo()">Copiar</button>
      <button class="btn" onclick="descargarTodo()">Descargar .txt</button>
      <span class="badge" id="t-status"></span>
    </div>
  </section>

  <!-- 3. EJEMPLOS -->
  <section id="v-ejemplos" class="card" style="display:none">
    <h2>Ejemplos listos para cargar</h2>
    <div class="grid grid-2">
      <select id="ex-sel" onchange="loadExample()">
        <option selected disabled>— elegir —</option>
        <option value="med">Medicina · triage</option>
        <option value="hog">Hogar · energía</option>
        <option value="sup">Supermercado · reposición</option>
        <option value="bic">Movilidad · bicicleta (dispositivo)</option>
      </select>
      <div class="row"><span class="pill">Se cargan actor, contexto, problema y plantillas de objetivos</span></div>
    </div>
    <div class="out" id="ex-vista" style="margin-top:8px">—</div>
  </section>

  <!-- 4. CHECKLIST -->
  <section id="v-checklist" class="card" style="display:none">
    <h2>Checklist automático</h2>
    <ul>
      <li>General: 1 verbo + actor + contexto.</li>
      <li>Específicos: 1 verbo + qué + indicador/umbral + tiempo.</li>
      <li>Solución: 1 verbo + tipo + solución + KPI + tiempo.</li>
      <li>Sin verbos encadenados (evita “comprender y calcular…”).</li>
    </ul>
    <div class="row">
      <button class="btn primary" onclick="autoCheck()">Revisar mi redacción</button>
      <span class="badge" id="ck-msg"></span>
    </div>
  </section>

  <!-- 5. QUIZ -->
  <section id="v-quiz" class="card" style="display:none">
    <h2>Mini-quiz</h2>
    <div id="q-box"></div>
    <div class="row" style="margin-top:8px">
      <button class="btn primary" onclick="corrQuiz()">Revisar</button>
      <button class="btn" onclick="resetQuiz()">Reiniciar</button>
      <span class="badge" id="q-score"></span>
    </div>
  </section>

  <p class="muted small">Consejo: redacta primero el <b>general</b>, luego 2-4 <b>específicos</b> medibles y finalmente el <b>de solución</b> con KPI.</p>
</div>

<script>
/* ===== Navegación ===== */
const views=["v-teoria","v-constructor","v-ejemplos","v-checklist","v-quiz"];
document.querySelectorAll(".tab").forEach(b=>{
  b.addEventListener("click",()=>{
    document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
    b.classList.add("active");
    const v=b.dataset.view;
    views.forEach(id=>document.getElementById(id).style.display = (id===v)?"block":"none");
  });
});
const $ = s => document.querySelector(s);

/* ===== Estado constructor ===== */
let especificos = [];

/* ===== Helpers ===== */
function oneVerbOK(text){
  // cuenta verbos aproximando por espacios en la primera palabra + conjunción " y "
  if(!text.trim()) return false;
  return !/\s+y\s+/i.test(text.trim()); // si contiene " y " => sospecha de 2 verbos
}

/* ===== General ===== */
function genGeneral(){
  const actor=$("#c-actor").value.trim();
  const ctx=$("#c-ctx").value.trim();
  const verbo=$("#g-verbo").value.trim();
  const res=$("#g-res").value.trim();
  if(!actor||!ctx||!res){ $("#g-check").textContent="Completa actor/contexto/resultado"; $("#g-check").style.color="var(--bad)"; return; }
  if(!oneVerbOK(verbo)){ $("#g-check").textContent="Solo un verbo"; $("#g-check").style.color="var(--bad)"; return; }
  const out=`${verbo} ${res} para ${actor} en ${ctx}.`;
  $("#g-out").textContent=out; $("#g-check").textContent="OK"; $("#g-check").style.color="var(--ok)";
}

/* ===== Específicos ===== */
function renderEsp(){
  const box=$("#e-list");
  if(especificos.length===0){ box.innerHTML='<div class="muted">Sin específicos añadidos.</div>'; return; }
  box.innerHTML = especificos.map((t,i)=>`
    <div class="item"><b>E${i+1}:</b> ${t}
      <span class="rm" title="Eliminar" onclick="delEsp(${i})">✕</span>
    </div>`).join("");
}
function addEsp(){
  const v=$("#e-verbo").value.trim(), q=$("#e-que").value.trim(), k=$("#e-kpi").value.trim(), t=$("#e-time").value.trim();
  if(!q||!k||!t){ $("#e-check").textContent="Completa qué/KPI/tiempo"; $("#e-check").style.color="var(--bad)"; return; }
  if(!oneVerbOK(v)){ $("#e-check").textContent="Un verbo"; $("#e-check").style.color="var(--bad)"; return; }
  const txt=`${v} ${q} con ${k} en ${t}.`;
  especificos.push(txt);
  $("#e-que").value=""; $("#e-kpi").value=""; $("#e-time").value="";
  $("#e-check").textContent="Añadido"; $("#e-check").style.color="var(--ok)";
  renderEsp();
}
function delEsp(i){ especificos.splice(i,1); renderEsp(); }

/* ===== Solución ===== */
function genSol(){
  const actor=$("#c-actor").value.trim(), ctx=$("#c-ctx").value.trim();
  const tipo=$("#s-tipo").value.trim(), v=$("#s-verbo").value.trim();
  const sol=$("#s-sol").value.trim(), k=$("#s-kpi").value.trim(), t=$("#s-time").value.trim();
  if(!actor||!ctx||!sol||!k||!t){ $("#s-check").textContent="Completa todos los campos"; $("#s-check").style.color="var(--bad)"; return; }
  if(!oneVerbOK(v)){ $("#s-check").textContent="Un verbo"; $("#s-check").style.color="var(--bad)"; return; }
  const txt=`${v} ${sol} (${tipo.toLowerCase()}) para ${actor} en ${ctx}, logrando ${k} en ${t}.`;
  $("#s-out").textContent=txt; $("#s-check").textContent="OK"; $("#s-check").style.color="var(--ok)";
}

/* ===== Compilar / copiar / descargar ===== */
function compilar(){
  const parts = [];
  if($("#g-out").textContent.trim()) parts.push("Objetivo general: " + $("#g-out").textContent.trim());
  if(especificos.length){ parts.push("Objetivos específicos:\n- " + especificos.join("\n- ")); }
  if($("#s-out").textContent.trim()) parts.push("Objetivo de solución: " + $("#s-out").textContent.trim());
  $("#todo-out").textContent = parts.join("\n\n") || "—";
}
function copiarTodo(){
  const txt=$("#todo-out").textContent.trim();
  if(!txt||txt==="—"){ $("#t-status").textContent="Nada que copiar"; $("#t-status").style.color="var(--bad)"; return; }
  navigator.clipboard.writeText(txt).then(()=>{ $("#t-status").textContent="Copiado ✅"; $("#t-status").style.color="var(--ok)"; });
}
function descargarTodo(){
  const txt=$("#todo-out").textContent.trim(); if(!txt||txt==="—") return;
  const blob=new Blob([txt],{type:"text/plain"}); const a=document.createElement("a");
  a.href=URL.createObjectURL(blob); a.download="objetivos.txt"; a.click(); URL.revokeObjectURL(a.href);
}

/* ===== Ejemplos ===== */
const EX={
  med:{ actor:"Paciente en urgencias", ctx:"sala de triage nocturna",
        prob:"mucha espera y triage aplicado de forma desigual",
        g:{verbo:"Reducir",res:"el tiempo de espera"},
        esp:[
          "Aplicar triage con acierto ≥90% en ≤60 min durante 4 semanas.",
          "Atender prioridades rojas en <10 min (≥95%) durante 4 semanas."
        ],
        sol:{tipo:"App",verbo:"Implementar",sol:"app de turnos y alertas",kpi:"espera −20%",time:"1 mes"} },
  hog:{ actor:"Familia del hogar", ctx:"vivienda",
        prob:"consumo eléctrico elevado por hábitos ineficientes",
        g:{verbo:"Reducir",res:"el consumo mensual de electricidad"},
        esp:[
          "Medir consumo semanal con error ≤5% frente al recibo.",
          "Comparar uso de LED vs halógeno con ahorro ≥10% en 4 semanas."
        ],
        sol:{tipo:"App",verbo:"Diseñar",sol:"panel de metas y alertas",kpi:"kWh/mes −15%",time:"1 mes"} },
  sup:{ actor:"Cliente y repositor", ctx:"supermercado",
        prob:"quiebres frecuentes por reposición tardía",
        g:{verbo:"Mejorar",res:"la disponibilidad en góndola"},
        esp:[
          "Calcular puntos de pedido (ABC) con MAPE ≤15% en 200 SKUs.",
          "Reducir quiebres −25% en 6 semanas en dos pasillos piloto."
        ],
        sol:{tipo:"Proceso",verbo:"Implementar",sol:"dashboard + escaneo de reposición",kpi:"quiebres −30%",time:"6 semanas"} },
  bic:{ actor:"Ciclista", ctx:"trayectos nocturnos",
        prob:"baja visibilidad por olvido de luces",
        g:{verbo:"Incrementar",res:"la visibilidad del ciclista"},
        esp:[
          "Registrar 10 trayectos nocturnos con incidencias y niveles de luz.",
          "Verificar encendido automático en <1 s (100% de eventos)."
        ],
        sol:{tipo:"Dispositivo",verbo:"Instalar",sol:"luces automáticas con sensor de luz/movimiento",kpi:"olvido 0% y autonomía ≥6 h",time:"2 semanas"} }
};
function loadExample(){
  const k=$("#ex-sel").value; if(!EX[k]) return;
  $("#c-actor").value=EX[k].actor; $("#c-ctx").value=EX[k].ctx; $("#c-prob").value=EX[k].prob;
  $("#g-verbo").value=EX[k].g.verbo; $("#g-res").value=EX[k].g.res; genGeneral();
  especificos=[...EX[k].esp]; renderEsp();
  $("#s-tipo").value=EX[k].sol.tipo; $("#s-verbo").value=EX[k].sol.verbo; $("#s-sol").value=EX[k].sol.sol; $("#s-kpi").value=EX[k].sol.kpi; $("#s-time").value=EX[k].sol.time; genSol();
  $("#ex-vista").textContent = `Caso cargado: ${EX[k].actor} en ${EX[k].ctx} • ${EX[k].prob}`;
}

/* ===== Checklist ===== */
function autoCheck(){
  const g=$("#g-out").textContent.trim(), s=$("#s-out").textContent.trim();
  let ok=0, total=3;
  // general
  if(g && /para\s.+\sen\s/i.test(g) && !/\s+y\s+/i.test(g.split(" ")[0])) ok++;
  // específicos
  const espOK = especificos.length>0 && especificos.every(t=>/\scon\s.+%|≥|≤|seg|min|h|horas|días|semanas|mes/i.test(t) && /\sen\s.+/.test(t));
  if(espOK) ok++;
  // solución
  if(s && /\(.+\)/.test(s) && /logrando\s.+\sen\s.+\./i.test(s)) ok++;
  $("#ck-msg").textContent = `Checklist: ${ok}/${total} ✓`;
  $("#ck-msg").style.color = ok>=2 ? "var(--ok)" : "var(--bad)";
}

/* ===== Quiz ===== */
const QUIZ=[
  {txt:"Reducir el tiempo de espera para pacientes en urgencias.", type:"general"},
  {txt:"Aplicar triage con acierto ≥90% en ≤60 min durante 4 semanas.", type:"especifico"},
  {txt:"Implementar app de turnos; espera −20% en 1 mes.", type:"solucion"},
  {txt:"La energía es cara; hay que ahorrar.", type:"noobj"},
  {txt:"Diseñar luces automáticas para bicicletas; olvido 0% en 2 semanas.", type:"solucion"},
  {txt:"Mejorar la visibilidad del ciclista en trayectos nocturnos.", type:"general"}
];
const TYPES={general:"Objetivo general",especifico:"Objetivo específico",solucion:"Objetivo de solución",noobj:"No es objetivo"};

function renderQuiz(){
  const box=$("#q-box");
  box.innerHTML = QUIZ.map((q,i)=>`
    <div class="qitem" id="qi-${i}">
      <div class="muted">${i+1}.</div>
      <div>${q.txt}</div>
      <div class="row" style="margin-top:6px">
        ${["general","especifico","solucion","noobj"].map(t=>`
         <label class="badge"><input type="radio" name="q${i}" value="${t}"> ${TYPES[t]}</label>`).join("")}
      </div>
    </div>`).join("");
}
function corrQuiz(){
  let bien=0;
  QUIZ.forEach((q,i)=>{
    const chosen = Array.from(document.getElementsByName("q"+i)).find(r=>r.checked);
    const el=$("#qi-"+i);
    el.classList.remove("ok","wrong");
    if(chosen && chosen.value===q.type){ bien++; el.classList.add("ok"); } else { el.classList.add("wrong"); }
  });
  $("#q-score").textContent = `Puntaje: ${bien}/${QUIZ.length}`;
}
function resetQuiz(){
  QUIZ.forEach((_,i)=>{
    Array.from(document.getElementsByName("q"+i)).forEach(r=>r.checked=false);
    $("#qi-"+i).classList.remove("ok","wrong");
  });
  $("#q-score").textContent="";
}
renderQuiz();

/* ===== init ===== */
document.addEventListener("DOMContentLoaded", ()=>{ renderEsp(); });
</script>
</body>
</html>
